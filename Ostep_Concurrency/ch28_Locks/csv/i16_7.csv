ARG seed 0
ARG numthreads 16
ARG program test-and-set.s
ARG interrupt frequency 7
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7                Thread 8                Thread 9                Thread 10                Thread 11                Thread 12                Thread 13                Thread 14                Thread 15         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 1005 add  $1, %ax
     6 1006 mov  %ax, count
     7 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     7                          1000 mov  $1, %ax
     8                          1001 xchg %ax, mutex
     9                          1002 test $0, %ax
    10                          1003 jne  .acquire
    11                          1000 mov  $1, %ax
    12                          1001 xchg %ax, mutex
    13                          1002 test $0, %ax
    14 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    14                                                   1000 mov  $1, %ax
    15                                                   1001 xchg %ax, mutex
    16                                                   1002 test $0, %ax
    17                                                   1003 jne  .acquire
    18                                                   1000 mov  $1, %ax
    19                                                   1001 xchg %ax, mutex
    20                                                   1002 test $0, %ax
    21 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    21                                                                            1000 mov  $1, %ax
    22                                                                            1001 xchg %ax, mutex
    23                                                                            1002 test $0, %ax
    24                                                                            1003 jne  .acquire
    25                                                                            1000 mov  $1, %ax
    26                                                                            1001 xchg %ax, mutex
    27                                                                            1002 test $0, %ax
    28 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    28                                                                                                     1000 mov  $1, %ax
    29                                                                                                     1001 xchg %ax, mutex
    30                                                                                                     1002 test $0, %ax
    31                                                                                                     1003 jne  .acquire
    32                                                                                                     1000 mov  $1, %ax
    33                                                                                                     1001 xchg %ax, mutex
    34                                                                                                     1002 test $0, %ax
    35 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    35                                                                                                                              1000 mov  $1, %ax
    36                                                                                                                              1001 xchg %ax, mutex
    37                                                                                                                              1002 test $0, %ax
    38                                                                                                                              1003 jne  .acquire
    39                                                                                                                              1000 mov  $1, %ax
    40                                                                                                                              1001 xchg %ax, mutex
    41                                                                                                                              1002 test $0, %ax
    42 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    42                                                                                                                                                       1000 mov  $1, %ax
    43                                                                                                                                                       1001 xchg %ax, mutex
    44                                                                                                                                                       1002 test $0, %ax
    45                                                                                                                                                       1003 jne  .acquire
    46                                                                                                                                                       1000 mov  $1, %ax
    47                                                                                                                                                       1001 xchg %ax, mutex
    48                                                                                                                                                       1002 test $0, %ax
    49 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    49                                                                                                                                                                                1000 mov  $1, %ax
    50                                                                                                                                                                                1001 xchg %ax, mutex
    51                                                                                                                                                                                1002 test $0, %ax
    52                                                                                                                                                                                1003 jne  .acquire
    53                                                                                                                                                                                1000 mov  $1, %ax
    54                                                                                                                                                                                1001 xchg %ax, mutex
    55                                                                                                                                                                                1002 test $0, %ax
    56 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    56                                                                                                                                                                                                         1000 mov  $1, %ax
    57                                                                                                                                                                                                         1001 xchg %ax, mutex
    58                                                                                                                                                                                                         1002 test $0, %ax
    59                                                                                                                                                                                                         1003 jne  .acquire
    60                                                                                                                                                                                                         1000 mov  $1, %ax
    61                                                                                                                                                                                                         1001 xchg %ax, mutex
    62                                                                                                                                                                                                         1002 test $0, %ax
    63 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    63                                                                                                                                                                                                                                  1000 mov  $1, %ax
    64                                                                                                                                                                                                                                  1001 xchg %ax, mutex
    65                                                                                                                                                                                                                                  1002 test $0, %ax
    66                                                                                                                                                                                                                                  1003 jne  .acquire
    67                                                                                                                                                                                                                                  1000 mov  $1, %ax
    68                                                                                                                                                                                                                                  1001 xchg %ax, mutex
    69                                                                                                                                                                                                                                  1002 test $0, %ax
    70 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    70                                                                                                                                                                                                                                                           1000 mov  $1, %ax
    71                                                                                                                                                                                                                                                           1001 xchg %ax, mutex
    72                                                                                                                                                                                                                                                           1002 test $0, %ax
    73                                                                                                                                                                                                                                                           1003 jne  .acquire
    74                                                                                                                                                                                                                                                           1000 mov  $1, %ax
    75                                                                                                                                                                                                                                                           1001 xchg %ax, mutex
    76                                                                                                                                                                                                                                                           1002 test $0, %ax
    77 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    77                                                                                                                                                                                                                                                                                    1000 mov  $1, %ax
    78                                                                                                                                                                                                                                                                                    1001 xchg %ax, mutex
    79                                                                                                                                                                                                                                                                                    1002 test $0, %ax
    80                                                                                                                                                                                                                                                                                    1003 jne  .acquire
    81                                                                                                                                                                                                                                                                                    1000 mov  $1, %ax
    82                                                                                                                                                                                                                                                                                    1001 xchg %ax, mutex
    83                                                                                                                                                                                                                                                                                    1002 test $0, %ax
    84 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    84                                                                                                                                                                                                                                                                                                             1000 mov  $1, %ax
    85                                                                                                                                                                                                                                                                                                             1001 xchg %ax, mutex
    86                                                                                                                                                                                                                                                                                                             1002 test $0, %ax
    87                                                                                                                                                                                                                                                                                                             1003 jne  .acquire
    88                                                                                                                                                                                                                                                                                                             1000 mov  $1, %ax
    89                                                                                                                                                                                                                                                                                                             1001 xchg %ax, mutex
    90                                                                                                                                                                                                                                                                                                             1002 test $0, %ax
    91 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    91                                                                                                                                                                                                                                                                                                                                      1000 mov  $1, %ax
    92                                                                                                                                                                                                                                                                                                                                      1001 xchg %ax, mutex
    93                                                                                                                                                                                                                                                                                                                                      1002 test $0, %ax
    94                                                                                                                                                                                                                                                                                                                                      1003 jne  .acquire
    95                                                                                                                                                                                                                                                                                                                                      1000 mov  $1, %ax
    96                                                                                                                                                                                                                                                                                                                                      1001 xchg %ax, mutex
    97                                                                                                                                                                                                                                                                                                                                      1002 test $0, %ax
    98 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    98                                                                                                                                                                                                                                                                                                                                                               1000 mov  $1, %ax
    99                                                                                                                                                                                                                                                                                                                                                               1001 xchg %ax, mutex
   100                                                                                                                                                                                                                                                                                                                                                               1002 test $0, %ax
   101                                                                                                                                                                                                                                                                                                                                                               1003 jne  .acquire
   102                                                                                                                                                                                                                                                                                                                                                               1000 mov  $1, %ax
   103                                                                                                                                                                                                                                                                                                                                                               1001 xchg %ax, mutex
   104                                                                                                                                                                                                                                                                                                                                                               1002 test $0, %ax
   105 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   105                                                                                                                                                                                                                                                                                                                                                                                        1000 mov  $1, %ax
   106                                                                                                                                                                                                                                                                                                                                                                                        1001 xchg %ax, mutex
   107                                                                                                                                                                                                                                                                                                                                                                                        1002 test $0, %ax
   108                                                                                                                                                                                                                                                                                                                                                                                        1003 jne  .acquire
   109                                                                                                                                                                                                                                                                                                                                                                                        1000 mov  $1, %ax
   110                                                                                                                                                                                                                                                                                                                                                                                        1001 xchg %ax, mutex
   111                                                                                                                                                                                                                                                                                                                                                                                        1002 test $0, %ax
   112 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   112 1007 mov  $0, mutex
   113 1008 sub  $1, %bx
   114 1009 test $0, %bx
   115 1010 jgt .top
   116 1011 halt
   117 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   117                          1003 jne  .acquire
   118                          1000 mov  $1, %ax
   119 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   119                                                   1003 jne  .acquire
   120                                                   1000 mov  $1, %ax
   121                                                   1001 xchg %ax, mutex
   122                                                   1002 test $0, %ax
   123                                                   1003 jne  .acquire
   124                                                   1004 mov  count, %ax
   125                                                   1005 add  $1, %ax
   126 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   126                                                                            1003 jne  .acquire
   127                                                                            1000 mov  $1, %ax
   128                                                                            1001 xchg %ax, mutex
   129                                                                            1002 test $0, %ax
   130                                                                            1003 jne  .acquire
   131                                                                            1000 mov  $1, %ax
   132                                                                            1001 xchg %ax, mutex
   133 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   133                                                                                                     1003 jne  .acquire
   134                                                                                                     1000 mov  $1, %ax
   135                                                                                                     1001 xchg %ax, mutex
   136                                                                                                     1002 test $0, %ax
   137                                                                                                     1003 jne  .acquire
   138                                                                                                     1000 mov  $1, %ax
   139                                                                                                     1001 xchg %ax, mutex
   140 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   140                                                                                                                              1003 jne  .acquire
   141                                                                                                                              1000 mov  $1, %ax
   142                                                                                                                              1001 xchg %ax, mutex
   143                                                                                                                              1002 test $0, %ax
   144                                                                                                                              1003 jne  .acquire
   145                                                                                                                              1000 mov  $1, %ax
   146                                                                                                                              1001 xchg %ax, mutex
   147 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   147                                                                                                                                                       1003 jne  .acquire
   148                                                                                                                                                       1000 mov  $1, %ax
   149                                                                                                                                                       1001 xchg %ax, mutex
   150                                                                                                                                                       1002 test $0, %ax
   151                                                                                                                                                       1003 jne  .acquire
   152                                                                                                                                                       1000 mov  $1, %ax
   153                                                                                                                                                       1001 xchg %ax, mutex
   154 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   154                                                                                                                                                                                1003 jne  .acquire
   155                                                                                                                                                                                1000 mov  $1, %ax
   156                                                                                                                                                                                1001 xchg %ax, mutex
   157                                                                                                                                                                                1002 test $0, %ax
   158                                                                                                                                                                                1003 jne  .acquire
   159                                                                                                                                                                                1000 mov  $1, %ax
   160                                                                                                                                                                                1001 xchg %ax, mutex
   161 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   161                                                                                                                                                                                                         1003 jne  .acquire
   162                                                                                                                                                                                                         1000 mov  $1, %ax
   163                                                                                                                                                                                                         1001 xchg %ax, mutex
   164                                                                                                                                                                                                         1002 test $0, %ax
   165                                                                                                                                                                                                         1003 jne  .acquire
   166                                                                                                                                                                                                         1000 mov  $1, %ax
   167                                                                                                                                                                                                         1001 xchg %ax, mutex
   168 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   168                                                                                                                                                                                                                                  1003 jne  .acquire
   169                                                                                                                                                                                                                                  1000 mov  $1, %ax
   170                                                                                                                                                                                                                                  1001 xchg %ax, mutex
   171                                                                                                                                                                                                                                  1002 test $0, %ax
   172                                                                                                                                                                                                                                  1003 jne  .acquire
   173                                                                                                                                                                                                                                  1000 mov  $1, %ax
   174                                                                                                                                                                                                                                  1001 xchg %ax, mutex
   175 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   175                                                                                                                                                                                                                                                           1003 jne  .acquire
   176                                                                                                                                                                                                                                                           1000 mov  $1, %ax
   177                                                                                                                                                                                                                                                           1001 xchg %ax, mutex
   178                                                                                                                                                                                                                                                           1002 test $0, %ax
   179                                                                                                                                                                                                                                                           1003 jne  .acquire
   180                                                                                                                                                                                                                                                           1000 mov  $1, %ax
   181                                                                                                                                                                                                                                                           1001 xchg %ax, mutex
   182 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   182                                                                                                                                                                                                                                                                                    1003 jne  .acquire
   183                                                                                                                                                                                                                                                                                    1000 mov  $1, %ax
   184                                                                                                                                                                                                                                                                                    1001 xchg %ax, mutex
   185                                                                                                                                                                                                                                                                                    1002 test $0, %ax
   186                                                                                                                                                                                                                                                                                    1003 jne  .acquire
   187                                                                                                                                                                                                                                                                                    1000 mov  $1, %ax
   188                                                                                                                                                                                                                                                                                    1001 xchg %ax, mutex
   189 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   189                                                                                                                                                                                                                                                                                                             1003 jne  .acquire
   190                                                                                                                                                                                                                                                                                                             1000 mov  $1, %ax
   191                                                                                                                                                                                                                                                                                                             1001 xchg %ax, mutex
   192                                                                                                                                                                                                                                                                                                             1002 test $0, %ax
   193                                                                                                                                                                                                                                                                                                             1003 jne  .acquire
   194                                                                                                                                                                                                                                                                                                             1000 mov  $1, %ax
   195                                                                                                                                                                                                                                                                                                             1001 xchg %ax, mutex
   196 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   196                                                                                                                                                                                                                                                                                                                                      1003 jne  .acquire
   197                                                                                                                                                                                                                                                                                                                                      1000 mov  $1, %ax
   198                                                                                                                                                                                                                                                                                                                                      1001 xchg %ax, mutex
   199                                                                                                                                                                                                                                                                                                                                      1002 test $0, %ax
   200                                                                                                                                                                                                                                                                                                                                      1003 jne  .acquire
   201                                                                                                                                                                                                                                                                                                                                      1000 mov  $1, %ax
   202                                                                                                                                                                                                                                                                                                                                      1001 xchg %ax, mutex
   203 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   203                                                                                                                                                                                                                                                                                                                                                               1003 jne  .acquire
   204                                                                                                                                                                                                                                                                                                                                                               1000 mov  $1, %ax
   205                                                                                                                                                                                                                                                                                                                                                               1001 xchg %ax, mutex
   206                                                                                                                                                                                                                                                                                                                                                               1002 test $0, %ax
   207                                                                                                                                                                                                                                                                                                                                                               1003 jne  .acquire
   208                                                                                                                                                                                                                                                                                                                                                               1000 mov  $1, %ax
   209                                                                                                                                                                                                                                                                                                                                                               1001 xchg %ax, mutex
   210 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   210                                                                                                                                                                                                                                                                                                                                                                                        1003 jne  .acquire
   211                                                                                                                                                                                                                                                                                                                                                                                        1000 mov  $1, %ax
   212                                                                                                                                                                                                                                                                                                                                                                                        1001 xchg %ax, mutex
   213                                                                                                                                                                                                                                                                                                                                                                                        1002 test $0, %ax
   214                                                                                                                                                                                                                                                                                                                                                                                        1003 jne  .acquire
   215                                                                                                                                                                                                                                                                                                                                                                                        1000 mov  $1, %ax
   216                                                                                                                                                                                                                                                                                                                                                                                        1001 xchg %ax, mutex
   217 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   217                          1001 xchg %ax, mutex
   218                          1002 test $0, %ax
   219                          1003 jne  .acquire
   220                          1000 mov  $1, %ax
   221                          1001 xchg %ax, mutex
   222                          1002 test $0, %ax
   223                          1003 jne  .acquire
   224 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   224                                                   1006 mov  %ax, count
   225                                                   1007 mov  $0, mutex
   226                                                   1008 sub  $1, %bx
   227                                                   1009 test $0, %bx
   228                                                   1010 jgt .top
   229                                                   1011 halt
   230 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   230                                                                            1002 test $0, %ax
   231 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   231                                                                                                     1002 test $0, %ax
   232                                                                                                     1003 jne  .acquire
   233                                                                                                     1000 mov  $1, %ax
   234                                                                                                     1001 xchg %ax, mutex
   235                                                                                                     1002 test $0, %ax
   236                                                                                                     1003 jne  .acquire
   237                                                                                                     1004 mov  count, %ax
   238 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   238                                                                                                                              1002 test $0, %ax
   239                                                                                                                              1003 jne  .acquire
   240                                                                                                                              1000 mov  $1, %ax
   241                                                                                                                              1001 xchg %ax, mutex
   242                                                                                                                              1002 test $0, %ax
   243                                                                                                                              1003 jne  .acquire
   244                                                                                                                              1000 mov  $1, %ax
   245 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   245                                                                                                                                                       1002 test $0, %ax
   246                                                                                                                                                       1003 jne  .acquire
   247                                                                                                                                                       1000 mov  $1, %ax
   248                                                                                                                                                       1001 xchg %ax, mutex
   249                                                                                                                                                       1002 test $0, %ax
   250                                                                                                                                                       1003 jne  .acquire
   251                                                                                                                                                       1000 mov  $1, %ax
   252 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   252                                                                                                                                                                                1002 test $0, %ax
   253                                                                                                                                                                                1003 jne  .acquire
   254                                                                                                                                                                                1000 mov  $1, %ax
   255                                                                                                                                                                                1001 xchg %ax, mutex
   256                                                                                                                                                                                1002 test $0, %ax
   257                                                                                                                                                                                1003 jne  .acquire
   258                                                                                                                                                                                1000 mov  $1, %ax
   259 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   259                                                                                                                                                                                                         1002 test $0, %ax
   260                                                                                                                                                                                                         1003 jne  .acquire
   261                                                                                                                                                                                                         1000 mov  $1, %ax
   262                                                                                                                                                                                                         1001 xchg %ax, mutex
   263                                                                                                                                                                                                         1002 test $0, %ax
   264                                                                                                                                                                                                         1003 jne  .acquire
   265                                                                                                                                                                                                         1000 mov  $1, %ax
   266 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   266                                                                                                                                                                                                                                  1002 test $0, %ax
   267                                                                                                                                                                                                                                  1003 jne  .acquire
   268                                                                                                                                                                                                                                  1000 mov  $1, %ax
   269                                                                                                                                                                                                                                  1001 xchg %ax, mutex
   270                                                                                                                                                                                                                                  1002 test $0, %ax
   271                                                                                                                                                                                                                                  1003 jne  .acquire
   272                                                                                                                                                                                                                                  1000 mov  $1, %ax
   273 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   273                                                                                                                                                                                                                                                           1002 test $0, %ax
   274                                                                                                                                                                                                                                                           1003 jne  .acquire
   275                                                                                                                                                                                                                                                           1000 mov  $1, %ax
   276                                                                                                                                                                                                                                                           1001 xchg %ax, mutex
   277                                                                                                                                                                                                                                                           1002 test $0, %ax
   278                                                                                                                                                                                                                                                           1003 jne  .acquire
   279                                                                                                                                                                                                                                                           1000 mov  $1, %ax
   280 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   280                                                                                                                                                                                                                                                                                    1002 test $0, %ax
   281                                                                                                                                                                                                                                                                                    1003 jne  .acquire
   282                                                                                                                                                                                                                                                                                    1000 mov  $1, %ax
   283                                                                                                                                                                                                                                                                                    1001 xchg %ax, mutex
   284                                                                                                                                                                                                                                                                                    1002 test $0, %ax
   285                                                                                                                                                                                                                                                                                    1003 jne  .acquire
   286                                                                                                                                                                                                                                                                                    1000 mov  $1, %ax
   287 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   287                                                                                                                                                                                                                                                                                                             1002 test $0, %ax
   288                                                                                                                                                                                                                                                                                                             1003 jne  .acquire
   289                                                                                                                                                                                                                                                                                                             1000 mov  $1, %ax
   290                                                                                                                                                                                                                                                                                                             1001 xchg %ax, mutex
   291                                                                                                                                                                                                                                                                                                             1002 test $0, %ax
   292                                                                                                                                                                                                                                                                                                             1003 jne  .acquire
   293                                                                                                                                                                                                                                                                                                             1000 mov  $1, %ax
   294 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   294                                                                                                                                                                                                                                                                                                                                      1002 test $0, %ax
   295                                                                                                                                                                                                                                                                                                                                      1003 jne  .acquire
   296                                                                                                                                                                                                                                                                                                                                      1000 mov  $1, %ax
   297                                                                                                                                                                                                                                                                                                                                      1001 xchg %ax, mutex
   298                                                                                                                                                                                                                                                                                                                                      1002 test $0, %ax
   299                                                                                                                                                                                                                                                                                                                                      1003 jne  .acquire
   300                                                                                                                                                                                                                                                                                                                                      1000 mov  $1, %ax
   301 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   301                                                                                                                                                                                                                                                                                                                                                               1002 test $0, %ax
   302                                                                                                                                                                                                                                                                                                                                                               1003 jne  .acquire
   303                                                                                                                                                                                                                                                                                                                                                               1000 mov  $1, %ax
   304                                                                                                                                                                                                                                                                                                                                                               1001 xchg %ax, mutex
   305                                                                                                                                                                                                                                                                                                                                                               1002 test $0, %ax
   306                                                                                                                                                                                                                                                                                                                                                               1003 jne  .acquire
   307                                                                                                                                                                                                                                                                                                                                                               1000 mov  $1, %ax
   308 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   308                                                                                                                                                                                                                                                                                                                                                                                        1002 test $0, %ax
   309                                                                                                                                                                                                                                                                                                                                                                                        1003 jne  .acquire
   310                                                                                                                                                                                                                                                                                                                                                                                        1000 mov  $1, %ax
   311                                                                                                                                                                                                                                                                                                                                                                                        1001 xchg %ax, mutex
   312                                                                                                                                                                                                                                                                                                                                                                                        1002 test $0, %ax
   313                                                                                                                                                                                                                                                                                                                                                                                        1003 jne  .acquire
   314                                                                                                                                                                                                                                                                                                                                                                                        1000 mov  $1, %ax
   315 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   315                          1000 mov  $1, %ax
   316                          1001 xchg %ax, mutex
   317                          1002 test $0, %ax
   318                          1003 jne  .acquire
   319                          1000 mov  $1, %ax
   320                          1001 xchg %ax, mutex
   321                          1002 test $0, %ax
   322 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   322                                                                            1003 jne  .acquire
   323                                                                            1000 mov  $1, %ax
   324                                                                            1001 xchg %ax, mutex
   325                                                                            1002 test $0, %ax
   326                                                                            1003 jne  .acquire
   327                                                                            1000 mov  $1, %ax
   328                                                                            1001 xchg %ax, mutex
   329 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   329                                                                                                     1005 add  $1, %ax
   330                                                                                                     1006 mov  %ax, count
   331                                                                                                     1007 mov  $0, mutex
   332                                                                                                     1008 sub  $1, %bx
   333                                                                                                     1009 test $0, %bx
   334                                                                                                     1010 jgt .top
   335                                                                                                     1011 halt
   336 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   336 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   336                                                                                                                                                       1001 xchg %ax, mutex
   337                                                                                                                                                       1002 test $0, %ax
   338                                                                                                                                                       1003 jne  .acquire
   339                                                                                                                                                       1004 mov  count, %ax
   340                                                                                                                                                       1005 add  $1, %ax
   341                                                                                                                                                       1006 mov  %ax, count
   342                                                                                                                                                       1007 mov  $0, mutex
   343 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   343                                                                                                                                                                                1001 xchg %ax, mutex
   344                                                                                                                                                                                1002 test $0, %ax
   345                                                                                                                                                                                1003 jne  .acquire
   346                                                                                                                                                                                1004 mov  count, %ax
   347                                                                                                                                                                                1005 add  $1, %ax
   348                                                                                                                                                                                1006 mov  %ax, count
   349                                                                                                                                                                                1007 mov  $0, mutex
   350 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   350                                                                                                                                                                                                         1001 xchg %ax, mutex
   351                                                                                                                                                                                                         1002 test $0, %ax
   352                                                                                                                                                                                                         1003 jne  .acquire
   353                                                                                                                                                                                                         1004 mov  count, %ax
   354                                                                                                                                                                                                         1005 add  $1, %ax
   355                                                                                                                                                                                                         1006 mov  %ax, count
   356                                                                                                                                                                                                         1007 mov  $0, mutex
   357 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   357                                                                                                                                                                                                                                  1001 xchg %ax, mutex
   358                                                                                                                                                                                                                                  1002 test $0, %ax
   359                                                                                                                                                                                                                                  1003 jne  .acquire
   360                                                                                                                                                                                                                                  1004 mov  count, %ax
   361                                                                                                                                                                                                                                  1005 add  $1, %ax
   362                                                                                                                                                                                                                                  1006 mov  %ax, count
   363                                                                                                                                                                                                                                  1007 mov  $0, mutex
   364 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   364                                                                                                                                                                                                                                                           1001 xchg %ax, mutex
   365                                                                                                                                                                                                                                                           1002 test $0, %ax
   366                                                                                                                                                                                                                                                           1003 jne  .acquire
   367                                                                                                                                                                                                                                                           1004 mov  count, %ax
   368                                                                                                                                                                                                                                                           1005 add  $1, %ax
   369                                                                                                                                                                                                                                                           1006 mov  %ax, count
   370                                                                                                                                                                                                                                                           1007 mov  $0, mutex
   371 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   371                                                                                                                                                                                                                                                                                    1001 xchg %ax, mutex
   372                                                                                                                                                                                                                                                                                    1002 test $0, %ax
   373                                                                                                                                                                                                                                                                                    1003 jne  .acquire
   374                                                                                                                                                                                                                                                                                    1004 mov  count, %ax
   375                                                                                                                                                                                                                                                                                    1005 add  $1, %ax
   376                                                                                                                                                                                                                                                                                    1006 mov  %ax, count
   377                                                                                                                                                                                                                                                                                    1007 mov  $0, mutex
   378 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   378                                                                                                                                                                                                                                                                                                             1001 xchg %ax, mutex
   379                                                                                                                                                                                                                                                                                                             1002 test $0, %ax
   380                                                                                                                                                                                                                                                                                                             1003 jne  .acquire
   381                                                                                                                                                                                                                                                                                                             1004 mov  count, %ax
   382                                                                                                                                                                                                                                                                                                             1005 add  $1, %ax
   383                                                                                                                                                                                                                                                                                                             1006 mov  %ax, count
   384                                                                                                                                                                                                                                                                                                             1007 mov  $0, mutex
   385 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   385                                                                                                                                                                                                                                                                                                                                      1001 xchg %ax, mutex
   386                                                                                                                                                                                                                                                                                                                                      1002 test $0, %ax
   387                                                                                                                                                                                                                                                                                                                                      1003 jne  .acquire
   388                                                                                                                                                                                                                                                                                                                                      1004 mov  count, %ax
   389                                                                                                                                                                                                                                                                                                                                      1005 add  $1, %ax
   390                                                                                                                                                                                                                                                                                                                                      1006 mov  %ax, count
   391                                                                                                                                                                                                                                                                                                                                      1007 mov  $0, mutex
   392 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   392                                                                                                                                                                                                                                                                                                                                                               1001 xchg %ax, mutex
   393                                                                                                                                                                                                                                                                                                                                                               1002 test $0, %ax
   394                                                                                                                                                                                                                                                                                                                                                               1003 jne  .acquire
   395                                                                                                                                                                                                                                                                                                                                                               1004 mov  count, %ax
   396                                                                                                                                                                                                                                                                                                                                                               1005 add  $1, %ax
   397                                                                                                                                                                                                                                                                                                                                                               1006 mov  %ax, count
   398                                                                                                                                                                                                                                                                                                                                                               1007 mov  $0, mutex
   399 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   399                                                                                                                                                                                                                                                                                                                                                                                        1001 xchg %ax, mutex
   400                                                                                                                                                                                                                                                                                                                                                                                        1002 test $0, %ax
   401                                                                                                                                                                                                                                                                                                                                                                                        1003 jne  .acquire
   402                                                                                                                                                                                                                                                                                                                                                                                        1004 mov  count, %ax
   403                                                                                                                                                                                                                                                                                                                                                                                        1005 add  $1, %ax
   404                                                                                                                                                                                                                                                                                                                                                                                        1006 mov  %ax, count
   405                                                                                                                                                                                                                                                                                                                                                                                        1007 mov  $0, mutex
   406 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   406                          1003 jne  .acquire
   407                          1000 mov  $1, %ax
   408                          1001 xchg %ax, mutex
   409                          1002 test $0, %ax
   410                          1003 jne  .acquire
   411                          1004 mov  count, %ax
   412                          1005 add  $1, %ax
   413 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   413                                                                            1002 test $0, %ax
   414                                                                            1003 jne  .acquire
   415                                                                            1000 mov  $1, %ax
   416                                                                            1001 xchg %ax, mutex
   417                                                                            1002 test $0, %ax
   418                                                                            1003 jne  .acquire
   419                                                                            1000 mov  $1, %ax
   420 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   420                                                                                                                              1001 xchg %ax, mutex
   421                                                                                                                              1002 test $0, %ax
   422                                                                                                                              1003 jne  .acquire
   423                                                                                                                              1000 mov  $1, %ax
   424                                                                                                                              1001 xchg %ax, mutex
   425                                                                                                                              1002 test $0, %ax
   426                                                                                                                              1003 jne  .acquire
   427 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   427                                                                                                                                                       1008 sub  $1, %bx
   428                                                                                                                                                       1009 test $0, %bx
   429                                                                                                                                                       1010 jgt .top
   430                                                                                                                                                       1011 halt
   431 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   431                                                                                                                                                                                1008 sub  $1, %bx
   432                                                                                                                                                                                1009 test $0, %bx
   433                                                                                                                                                                                1010 jgt .top
   434 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   434                                                                                                                                                                                                         1008 sub  $1, %bx
   435                                                                                                                                                                                                         1009 test $0, %bx
   436                                                                                                                                                                                                         1010 jgt .top
   437                                                                                                                                                                                                         1011 halt
   438 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   438                                                                                                                                                                                                                                  1008 sub  $1, %bx
   439                                                                                                                                                                                                                                  1009 test $0, %bx
   440                                                                                                                                                                                                                                  1010 jgt .top
   441 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   441                                                                                                                                                                                                                                                           1008 sub  $1, %bx
   442                                                                                                                                                                                                                                                           1009 test $0, %bx
   443                                                                                                                                                                                                                                                           1010 jgt .top
   444                                                                                                                                                                                                                                                           1011 halt
   445 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   445                                                                                                                                                                                                                                                                                    1008 sub  $1, %bx
   446                                                                                                                                                                                                                                                                                    1009 test $0, %bx
   447                                                                                                                                                                                                                                                                                    1010 jgt .top
   448 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   448                                                                                                                                                                                                                                                                                                             1008 sub  $1, %bx
   449                                                                                                                                                                                                                                                                                                             1009 test $0, %bx
   450                                                                                                                                                                                                                                                                                                             1010 jgt .top
   451                                                                                                                                                                                                                                                                                                             1011 halt
   452 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   452                                                                                                                                                                                                                                                                                                                                      1008 sub  $1, %bx
   453                                                                                                                                                                                                                                                                                                                                      1009 test $0, %bx
   454                                                                                                                                                                                                                                                                                                                                      1010 jgt .top
   455 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   455                                                                                                                                                                                                                                                                                                                                                               1008 sub  $1, %bx
   456                                                                                                                                                                                                                                                                                                                                                               1009 test $0, %bx
   457                                                                                                                                                                                                                                                                                                                                                               1010 jgt .top
   458                                                                                                                                                                                                                                                                                                                                                               1011 halt
   459 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   459                                                                                                                                                                                                                                                                                                                                                                                        1008 sub  $1, %bx
   460                                                                                                                                                                                                                                                                                                                                                                                        1009 test $0, %bx
   461                                                                                                                                                                                                                                                                                                                                                                                        1010 jgt .top
   462 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   462                          1006 mov  %ax, count
   463                          1007 mov  $0, mutex
   464                          1008 sub  $1, %bx
   465                          1009 test $0, %bx
   466                          1010 jgt .top
   467                          1011 halt
   468 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   468                                                                            1001 xchg %ax, mutex
   469 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   469                                                                                                                              1000 mov  $1, %ax
   470                                                                                                                              1001 xchg %ax, mutex
   471                                                                                                                              1002 test $0, %ax
   472                                                                                                                              1003 jne  .acquire
   473                                                                                                                              1000 mov  $1, %ax
   474                                                                                                                              1001 xchg %ax, mutex
   475                                                                                                                              1002 test $0, %ax
   476 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   476                                                                                                                                                                                1011 halt
   477 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   477                                                                                                                                                                                                                                  1011 halt
   478 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   478                                                                                                                                                                                                                                                                                    1011 halt
   479 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   479                                                                                                                                                                                                                                                                                                                                      1011 halt
   480 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   480                                                                                                                                                                                                                                                                                                                                                                                        1011 halt
   481 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   481                                                                            1002 test $0, %ax
   482                                                                            1003 jne  .acquire
   483 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   483                                                                                                                              1003 jne  .acquire
   484                                                                                                                              1000 mov  $1, %ax
   485                                                                                                                              1001 xchg %ax, mutex
   486                                                                                                                              1002 test $0, %ax
   487                                                                                                                              1003 jne  .acquire
   488                                                                                                                              1000 mov  $1, %ax
   489                                                                                                                              1001 xchg %ax, mutex
   490 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   490                                                                            1004 mov  count, %ax
   491                                                                            1005 add  $1, %ax
   492                                                                            1006 mov  %ax, count
   493                                                                            1007 mov  $0, mutex
   494                                                                            1008 sub  $1, %bx
   495                                                                            1009 test $0, %bx
   496                                                                            1010 jgt .top
   497 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   497                                                                                                                              1002 test $0, %ax
   498                                                                                                                              1003 jne  .acquire
   499                                                                                                                              1000 mov  $1, %ax
   500                                                                                                                              1001 xchg %ax, mutex
   501                                                                                                                              1002 test $0, %ax
   502                                                                                                                              1003 jne  .acquire
   503                                                                                                                              1004 mov  count, %ax
   504 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   504                                                                            1011 halt
   505 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   505                                                                                                                              1005 add  $1, %ax
   506                                                                                                                              1006 mov  %ax, count
   507                                                                                                                              1007 mov  $0, mutex
   508                                                                                                                              1008 sub  $1, %bx
   509                                                                                                                              1009 test $0, %bx
   510                                                                                                                              1010 jgt .top
   511 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   511                                                                                                                              1011 halt

STATS:: Instructions    512
STATS:: Emulation Rate  101.35 kinst/sec
