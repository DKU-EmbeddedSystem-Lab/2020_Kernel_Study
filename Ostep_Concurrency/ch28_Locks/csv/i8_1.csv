ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 1
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     1                          1000 mov  $1, %ax
     2 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     2                                                   1000 mov  $1, %ax
     3 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     3                                                                            1000 mov  $1, %ax
     4 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     4                                                                                                     1000 mov  $1, %ax
     5 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     5                                                                                                                              1000 mov  $1, %ax
     6 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     6                                                                                                                                                       1000 mov  $1, %ax
     7 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     7                                                                                                                                                                                1000 mov  $1, %ax
     8 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     8 1001 xchg %ax, mutex
     9 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     9                          1001 xchg %ax, mutex
    10 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    10                                                   1001 xchg %ax, mutex
    11 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    11                                                                            1001 xchg %ax, mutex
    12 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    12                                                                                                     1001 xchg %ax, mutex
    13 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    13                                                                                                                              1001 xchg %ax, mutex
    14 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    14                                                                                                                                                       1001 xchg %ax, mutex
    15 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    15                                                                                                                                                                                1001 xchg %ax, mutex
    16 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    16 1002 test $0, %ax
    17 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    17                          1002 test $0, %ax
    18 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    18                                                   1002 test $0, %ax
    19 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    19                                                                            1002 test $0, %ax
    20 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    20                                                                                                     1002 test $0, %ax
    21 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    21                                                                                                                              1002 test $0, %ax
    22 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    22                                                                                                                                                       1002 test $0, %ax
    23 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    23                                                                                                                                                                                1002 test $0, %ax
    24 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    24 1003 jne  .acquire
    25 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    25                          1003 jne  .acquire
    26 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    26                                                   1003 jne  .acquire
    27 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    27                                                                            1003 jne  .acquire
    28 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    28                                                                                                     1003 jne  .acquire
    29 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    29                                                                                                                              1003 jne  .acquire
    30 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    30                                                                                                                                                       1003 jne  .acquire
    31 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    31                                                                                                                                                                                1003 jne  .acquire
    32 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    32 1004 mov  count, %ax
    33 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    33                          1000 mov  $1, %ax
    34 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    34                                                   1000 mov  $1, %ax
    35 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    35                                                                            1000 mov  $1, %ax
    36 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    36                                                                                                     1000 mov  $1, %ax
    37 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    37                                                                                                                              1000 mov  $1, %ax
    38 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    38                                                                                                                                                       1000 mov  $1, %ax
    39 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    39                                                                                                                                                                                1000 mov  $1, %ax
    40 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    40 1005 add  $1, %ax
    41 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    41                          1001 xchg %ax, mutex
    42 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    42                                                   1001 xchg %ax, mutex
    43 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    43                                                                            1001 xchg %ax, mutex
    44 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    44                                                                                                     1001 xchg %ax, mutex
    45 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    45                                                                                                                              1001 xchg %ax, mutex
    46 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    46                                                                                                                                                       1001 xchg %ax, mutex
    47 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    47                                                                                                                                                                                1001 xchg %ax, mutex
    48 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    48 1006 mov  %ax, count
    49 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    49                          1002 test $0, %ax
    50 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    50                                                   1002 test $0, %ax
    51 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    51                                                                            1002 test $0, %ax
    52 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    52                                                                                                     1002 test $0, %ax
    53 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    53                                                                                                                              1002 test $0, %ax
    54 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    54                                                                                                                                                       1002 test $0, %ax
    55 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    55                                                                                                                                                                                1002 test $0, %ax
    56 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    56 1007 mov  $0, mutex
    57 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    57                          1003 jne  .acquire
    58 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    58                                                   1003 jne  .acquire
    59 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    59                                                                            1003 jne  .acquire
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                                                     1003 jne  .acquire
    61 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    61                                                                                                                              1003 jne  .acquire
    62 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    62                                                                                                                                                       1003 jne  .acquire
    63 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    63                                                                                                                                                                                1003 jne  .acquire
    64 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    64 1008 sub  $1, %bx
    65 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    65                          1000 mov  $1, %ax
    66 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    66                                                   1000 mov  $1, %ax
    67 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    67                                                                            1000 mov  $1, %ax
    68 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    68                                                                                                     1000 mov  $1, %ax
    69 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    69                                                                                                                              1000 mov  $1, %ax
    70 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    70                                                                                                                                                       1000 mov  $1, %ax
    71 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    71                                                                                                                                                                                1000 mov  $1, %ax
    72 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    72 1009 test $0, %bx
    73 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    73                          1001 xchg %ax, mutex
    74 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    74                                                   1001 xchg %ax, mutex
    75 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    75                                                                            1001 xchg %ax, mutex
    76 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    76                                                                                                     1001 xchg %ax, mutex
    77 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    77                                                                                                                              1001 xchg %ax, mutex
    78 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    78                                                                                                                                                       1001 xchg %ax, mutex
    79 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    79                                                                                                                                                                                1001 xchg %ax, mutex
    80 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    80 1010 jgt .top
    81 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    81                          1002 test $0, %ax
    82 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    82                                                   1002 test $0, %ax
    83 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    83                                                                            1002 test $0, %ax
    84 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    84                                                                                                     1002 test $0, %ax
    85 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    85                                                                                                                              1002 test $0, %ax
    86 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    86                                                                                                                                                       1002 test $0, %ax
    87 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    87                                                                                                                                                                                1002 test $0, %ax
    88 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    88 1011 halt
    89 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    89 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    89                                                   1003 jne  .acquire
    90 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    90                                                                            1003 jne  .acquire
    91 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    91                                                                                                     1003 jne  .acquire
    92 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    92                                                                                                                              1003 jne  .acquire
    93 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    93                                                                                                                                                       1003 jne  .acquire
    94 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    94                                                                                                                                                                                1003 jne  .acquire
    95 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    95                          1003 jne  .acquire
    96 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    96                                                   1000 mov  $1, %ax
    97 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    97                                                                            1000 mov  $1, %ax
    98 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    98                                                                                                     1000 mov  $1, %ax
    99 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    99                                                                                                                              1000 mov  $1, %ax
   100 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   100                                                                                                                                                       1000 mov  $1, %ax
   101 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   101                                                                                                                                                                                1000 mov  $1, %ax
   102 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   102                          1004 mov  count, %ax
   103 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   103                                                   1001 xchg %ax, mutex
   104 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   104                                                                            1001 xchg %ax, mutex
   105 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   105                                                                                                     1001 xchg %ax, mutex
   106 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   106                                                                                                                              1001 xchg %ax, mutex
   107 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   107                                                                                                                                                       1001 xchg %ax, mutex
   108 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   108                                                                                                                                                                                1001 xchg %ax, mutex
   109 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   109                          1005 add  $1, %ax
   110 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   110                                                   1002 test $0, %ax
   111 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   111                                                                            1002 test $0, %ax
   112 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   112                                                                                                     1002 test $0, %ax
   113 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   113                                                                                                                              1002 test $0, %ax
   114 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   114                                                                                                                                                       1002 test $0, %ax
   115 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   115                                                                                                                                                                                1002 test $0, %ax
   116 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   116                          1006 mov  %ax, count
   117 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   117                                                   1003 jne  .acquire
   118 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   118                                                                            1003 jne  .acquire
   119 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   119                                                                                                     1003 jne  .acquire
   120 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   120                                                                                                                              1003 jne  .acquire
   121 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   121                                                                                                                                                       1003 jne  .acquire
   122 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   122                                                                                                                                                                                1003 jne  .acquire
   123 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   123                          1007 mov  $0, mutex
   124 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   124                                                   1000 mov  $1, %ax
   125 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   125                                                                            1000 mov  $1, %ax
   126 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   126                                                                                                     1000 mov  $1, %ax
   127 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   127                                                                                                                              1000 mov  $1, %ax
   128 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   128                                                                                                                                                       1000 mov  $1, %ax
   129 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   129                                                                                                                                                                                1000 mov  $1, %ax
   130 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   130                          1008 sub  $1, %bx
   131 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   131                                                   1001 xchg %ax, mutex
   132 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   132                                                                            1001 xchg %ax, mutex
   133 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   133                                                                                                     1001 xchg %ax, mutex
   134 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   134                                                                                                                              1001 xchg %ax, mutex
   135 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   135                                                                                                                                                       1001 xchg %ax, mutex
   136 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   136                                                                                                                                                                                1001 xchg %ax, mutex
   137 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   137                          1009 test $0, %bx
   138 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   138                                                   1002 test $0, %ax
   139 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   139                                                                            1002 test $0, %ax
   140 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   140                                                                                                     1002 test $0, %ax
   141 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   141                                                                                                                              1002 test $0, %ax
   142 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   142                                                                                                                                                       1002 test $0, %ax
   143 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   143                                                                                                                                                                                1002 test $0, %ax
   144 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   144                          1010 jgt .top
   145 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   145                                                   1003 jne  .acquire
   146 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   146                                                                            1003 jne  .acquire
   147 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   147                                                                                                     1003 jne  .acquire
   148 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   148                                                                                                                              1003 jne  .acquire
   149 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   149                                                                                                                                                       1003 jne  .acquire
   150 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   150                                                                                                                                                                                1003 jne  .acquire
   151 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   151                          1011 halt
   152 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   152 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   152                                                                            1000 mov  $1, %ax
   153 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   153                                                                                                     1000 mov  $1, %ax
   154 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   154                                                                                                                              1000 mov  $1, %ax
   155 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   155                                                                                                                                                       1000 mov  $1, %ax
   156 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   156                                                                                                                                                                                1000 mov  $1, %ax
   157 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   157                                                   1004 mov  count, %ax
   158 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   158                                                                            1001 xchg %ax, mutex
   159 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   159                                                                                                     1001 xchg %ax, mutex
   160 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   160                                                                                                                              1001 xchg %ax, mutex
   161 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   161                                                                                                                                                       1001 xchg %ax, mutex
   162 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   162                                                                                                                                                                                1001 xchg %ax, mutex
   163 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   163                                                   1005 add  $1, %ax
   164 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   164                                                                            1002 test $0, %ax
   165 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   165                                                                                                     1002 test $0, %ax
   166 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   166                                                                                                                              1002 test $0, %ax
   167 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   167                                                                                                                                                       1002 test $0, %ax
   168 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   168                                                                                                                                                                                1002 test $0, %ax
   169 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   169                                                   1006 mov  %ax, count
   170 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   170                                                                            1003 jne  .acquire
   171 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   171                                                                                                     1003 jne  .acquire
   172 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   172                                                                                                                              1003 jne  .acquire
   173 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   173                                                                                                                                                       1003 jne  .acquire
   174 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   174                                                                                                                                                                                1003 jne  .acquire
   175 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   175                                                   1007 mov  $0, mutex
   176 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   176                                                                            1000 mov  $1, %ax
   177 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   177                                                                                                     1000 mov  $1, %ax
   178 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   178                                                                                                                              1000 mov  $1, %ax
   179 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   179                                                                                                                                                       1000 mov  $1, %ax
   180 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   180                                                                                                                                                                                1000 mov  $1, %ax
   181 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   181                                                   1008 sub  $1, %bx
   182 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   182                                                                            1001 xchg %ax, mutex
   183 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   183                                                                                                     1001 xchg %ax, mutex
   184 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   184                                                                                                                              1001 xchg %ax, mutex
   185 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   185                                                                                                                                                       1001 xchg %ax, mutex
   186 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   186                                                                                                                                                                                1001 xchg %ax, mutex
   187 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   187                                                   1009 test $0, %bx
   188 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   188                                                                            1002 test $0, %ax
   189 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   189                                                                                                     1002 test $0, %ax
   190 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   190                                                                                                                              1002 test $0, %ax
   191 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   191                                                                                                                                                       1002 test $0, %ax
   192 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   192                                                                                                                                                                                1002 test $0, %ax
   193 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   193                                                   1010 jgt .top
   194 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   194                                                                            1003 jne  .acquire
   195 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   195                                                                                                     1003 jne  .acquire
   196 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   196                                                                                                                              1003 jne  .acquire
   197 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   197                                                                                                                                                       1003 jne  .acquire
   198 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   198                                                                                                                                                                                1003 jne  .acquire
   199 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   199                                                   1011 halt
   200 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   200 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   200                                                                                                     1000 mov  $1, %ax
   201 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   201                                                                                                                              1000 mov  $1, %ax
   202 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   202                                                                                                                                                       1000 mov  $1, %ax
   203 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   203                                                                                                                                                                                1000 mov  $1, %ax
   204 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   204                                                                            1004 mov  count, %ax
   205 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   205                                                                                                     1001 xchg %ax, mutex
   206 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   206                                                                                                                              1001 xchg %ax, mutex
   207 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   207                                                                                                                                                       1001 xchg %ax, mutex
   208 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   208                                                                                                                                                                                1001 xchg %ax, mutex
   209 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   209                                                                            1005 add  $1, %ax
   210 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   210                                                                                                     1002 test $0, %ax
   211 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   211                                                                                                                              1002 test $0, %ax
   212 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   212                                                                                                                                                       1002 test $0, %ax
   213 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   213                                                                                                                                                                                1002 test $0, %ax
   214 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   214                                                                            1006 mov  %ax, count
   215 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   215                                                                                                     1003 jne  .acquire
   216 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   216                                                                                                                              1003 jne  .acquire
   217 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   217                                                                                                                                                       1003 jne  .acquire
   218 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   218                                                                                                                                                                                1003 jne  .acquire
   219 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   219                                                                            1007 mov  $0, mutex
   220 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   220                                                                                                     1000 mov  $1, %ax
   221 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   221                                                                                                                              1000 mov  $1, %ax
   222 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   222                                                                                                                                                       1000 mov  $1, %ax
   223 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   223                                                                                                                                                                                1000 mov  $1, %ax
   224 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   224                                                                            1008 sub  $1, %bx
   225 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   225                                                                                                     1001 xchg %ax, mutex
   226 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   226                                                                                                                              1001 xchg %ax, mutex
   227 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   227                                                                                                                                                       1001 xchg %ax, mutex
   228 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   228                                                                                                                                                                                1001 xchg %ax, mutex
   229 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   229                                                                            1009 test $0, %bx
   230 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   230                                                                                                     1002 test $0, %ax
   231 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   231                                                                                                                              1002 test $0, %ax
   232 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   232                                                                                                                                                       1002 test $0, %ax
   233 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   233                                                                                                                                                                                1002 test $0, %ax
   234 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   234                                                                            1010 jgt .top
   235 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   235                                                                                                     1003 jne  .acquire
   236 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   236                                                                                                                              1003 jne  .acquire
   237 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   237                                                                                                                                                       1003 jne  .acquire
   238 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   238                                                                                                                                                                                1003 jne  .acquire
   239 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   239                                                                            1011 halt
   240 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   240 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   240                                                                                                                              1000 mov  $1, %ax
   241 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   241                                                                                                                                                       1000 mov  $1, %ax
   242 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   242                                                                                                                                                                                1000 mov  $1, %ax
   243 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   243                                                                                                     1004 mov  count, %ax
   244 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   244                                                                                                                              1001 xchg %ax, mutex
   245 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   245                                                                                                                                                       1001 xchg %ax, mutex
   246 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   246                                                                                                                                                                                1001 xchg %ax, mutex
   247 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   247                                                                                                     1005 add  $1, %ax
   248 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   248                                                                                                                              1002 test $0, %ax
   249 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   249                                                                                                                                                       1002 test $0, %ax
   250 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   250                                                                                                                                                                                1002 test $0, %ax
   251 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   251                                                                                                     1006 mov  %ax, count
   252 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   252                                                                                                                              1003 jne  .acquire
   253 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   253                                                                                                                                                       1003 jne  .acquire
   254 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   254                                                                                                                                                                                1003 jne  .acquire
   255 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   255                                                                                                     1007 mov  $0, mutex
   256 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   256                                                                                                                              1000 mov  $1, %ax
   257 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   257                                                                                                                                                       1000 mov  $1, %ax
   258 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   258                                                                                                                                                                                1000 mov  $1, %ax
   259 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   259                                                                                                     1008 sub  $1, %bx
   260 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   260                                                                                                                              1001 xchg %ax, mutex
   261 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   261                                                                                                                                                       1001 xchg %ax, mutex
   262 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   262                                                                                                                                                                                1001 xchg %ax, mutex
   263 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   263                                                                                                     1009 test $0, %bx
   264 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   264                                                                                                                              1002 test $0, %ax
   265 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   265                                                                                                                                                       1002 test $0, %ax
   266 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   266                                                                                                                                                                                1002 test $0, %ax
   267 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   267                                                                                                     1010 jgt .top
   268 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   268                                                                                                                              1003 jne  .acquire
   269 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   269                                                                                                                                                       1003 jne  .acquire
   270 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   270                                                                                                                                                                                1003 jne  .acquire
   271 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   271                                                                                                     1011 halt
   272 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   272 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   272                                                                                                                                                       1000 mov  $1, %ax
   273 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   273                                                                                                                                                                                1000 mov  $1, %ax
   274 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   274                                                                                                                              1004 mov  count, %ax
   275 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   275                                                                                                                                                       1001 xchg %ax, mutex
   276 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   276                                                                                                                                                                                1001 xchg %ax, mutex
   277 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   277                                                                                                                              1005 add  $1, %ax
   278 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   278                                                                                                                                                       1002 test $0, %ax
   279 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   279                                                                                                                                                                                1002 test $0, %ax
   280 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   280                                                                                                                              1006 mov  %ax, count
   281 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   281                                                                                                                                                       1003 jne  .acquire
   282 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   282                                                                                                                                                                                1003 jne  .acquire
   283 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   283                                                                                                                              1007 mov  $0, mutex
   284 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   284                                                                                                                                                       1000 mov  $1, %ax
   285 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   285                                                                                                                                                                                1000 mov  $1, %ax
   286 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   286                                                                                                                              1008 sub  $1, %bx
   287 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   287                                                                                                                                                       1001 xchg %ax, mutex
   288 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   288                                                                                                                                                                                1001 xchg %ax, mutex
   289 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   289                                                                                                                              1009 test $0, %bx
   290 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   290                                                                                                                                                       1002 test $0, %ax
   291 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   291                                                                                                                                                                                1002 test $0, %ax
   292 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   292                                                                                                                              1010 jgt .top
   293 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   293                                                                                                                                                       1003 jne  .acquire
   294 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   294                                                                                                                                                                                1003 jne  .acquire
   295 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   295                                                                                                                              1011 halt
   296 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   296 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   296                                                                                                                                                                                1000 mov  $1, %ax
   297 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   297                                                                                                                                                       1004 mov  count, %ax
   298 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   298                                                                                                                                                                                1001 xchg %ax, mutex
   299 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   299                                                                                                                                                       1005 add  $1, %ax
   300 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   300                                                                                                                                                                                1002 test $0, %ax
   301 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   301                                                                                                                                                       1006 mov  %ax, count
   302 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   302                                                                                                                                                                                1003 jne  .acquire
   303 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   303                                                                                                                                                       1007 mov  $0, mutex
   304 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   304                                                                                                                                                                                1000 mov  $1, %ax
   305 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   305                                                                                                                                                       1008 sub  $1, %bx
   306 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   306                                                                                                                                                                                1001 xchg %ax, mutex
   307 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   307                                                                                                                                                       1009 test $0, %bx
   308 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   308                                                                                                                                                                                1002 test $0, %ax
   309 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   309                                                                                                                                                       1010 jgt .top
   310 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   310                                                                                                                                                                                1003 jne  .acquire
   311 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   311                                                                                                                                                       1011 halt
   312 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   312 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   312                                                                                                                                                                                1004 mov  count, %ax
   313 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   313                                                                                                                                                                                1005 add  $1, %ax
   314 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   314                                                                                                                                                                                1006 mov  %ax, count
   315 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   315                                                                                                                                                                                1007 mov  $0, mutex
   316 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   316                                                                                                                                                                                1008 sub  $1, %bx
   317 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   317                                                                                                                                                                                1009 test $0, %bx
   318 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   318                                                                                                                                                                                1010 jgt .top
   319 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   319                                                                                                                                                                                1011 halt

STATS:: Instructions    320
STATS:: Emulation Rate  57.90 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 2
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     2                          1000 mov  $1, %ax
     3                          1001 xchg %ax, mutex
     4 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     4                                                   1000 mov  $1, %ax
     5                                                   1001 xchg %ax, mutex
     6 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     6                                                                            1000 mov  $1, %ax
     7                                                                            1001 xchg %ax, mutex
     8 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     8                                                                                                     1000 mov  $1, %ax
     9                                                                                                     1001 xchg %ax, mutex
    10 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    10                                                                                                                              1000 mov  $1, %ax
    11                                                                                                                              1001 xchg %ax, mutex
    12 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    12                                                                                                                                                       1000 mov  $1, %ax
    13                                                                                                                                                       1001 xchg %ax, mutex
    14 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    14                                                                                                                                                                                1000 mov  $1, %ax
    15                                                                                                                                                                                1001 xchg %ax, mutex
    16 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    16 1002 test $0, %ax
    17 1003 jne  .acquire
    18 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    18                          1002 test $0, %ax
    19                          1003 jne  .acquire
    20 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    20                                                   1002 test $0, %ax
    21                                                   1003 jne  .acquire
    22 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    22                                                                            1002 test $0, %ax
    23                                                                            1003 jne  .acquire
    24 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    24                                                                                                     1002 test $0, %ax
    25                                                                                                     1003 jne  .acquire
    26 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    26                                                                                                                              1002 test $0, %ax
    27                                                                                                                              1003 jne  .acquire
    28 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    28                                                                                                                                                       1002 test $0, %ax
    29                                                                                                                                                       1003 jne  .acquire
    30 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    30                                                                                                                                                                                1002 test $0, %ax
    31                                                                                                                                                                                1003 jne  .acquire
    32 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    32 1004 mov  count, %ax
    33 1005 add  $1, %ax
    34 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    34                          1000 mov  $1, %ax
    35                          1001 xchg %ax, mutex
    36 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    36                                                   1000 mov  $1, %ax
    37                                                   1001 xchg %ax, mutex
    38 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    38                                                                            1000 mov  $1, %ax
    39                                                                            1001 xchg %ax, mutex
    40 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    40                                                                                                     1000 mov  $1, %ax
    41                                                                                                     1001 xchg %ax, mutex
    42 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    42                                                                                                                              1000 mov  $1, %ax
    43                                                                                                                              1001 xchg %ax, mutex
    44 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    44                                                                                                                                                       1000 mov  $1, %ax
    45                                                                                                                                                       1001 xchg %ax, mutex
    46 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    46                                                                                                                                                                                1000 mov  $1, %ax
    47                                                                                                                                                                                1001 xchg %ax, mutex
    48 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    48 1006 mov  %ax, count
    49 1007 mov  $0, mutex
    50 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    50                          1002 test $0, %ax
    51                          1003 jne  .acquire
    52 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    52                                                   1002 test $0, %ax
    53                                                   1003 jne  .acquire
    54 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    54                                                                            1002 test $0, %ax
    55                                                                            1003 jne  .acquire
    56 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    56                                                                                                     1002 test $0, %ax
    57                                                                                                     1003 jne  .acquire
    58 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    58                                                                                                                              1002 test $0, %ax
    59                                                                                                                              1003 jne  .acquire
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                                                                                                       1002 test $0, %ax
    61                                                                                                                                                       1003 jne  .acquire
    62 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    62                                                                                                                                                                                1002 test $0, %ax
    63                                                                                                                                                                                1003 jne  .acquire
    64 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    64 1008 sub  $1, %bx
    65 1009 test $0, %bx
    66 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    66                          1000 mov  $1, %ax
    67                          1001 xchg %ax, mutex
    68 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    68                                                   1000 mov  $1, %ax
    69                                                   1001 xchg %ax, mutex
    70 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    70                                                                            1000 mov  $1, %ax
    71                                                                            1001 xchg %ax, mutex
    72 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    72                                                                                                     1000 mov  $1, %ax
    73                                                                                                     1001 xchg %ax, mutex
    74 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    74                                                                                                                              1000 mov  $1, %ax
    75                                                                                                                              1001 xchg %ax, mutex
    76 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    76                                                                                                                                                       1000 mov  $1, %ax
    77                                                                                                                                                       1001 xchg %ax, mutex
    78 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    78                                                                                                                                                                                1000 mov  $1, %ax
    79                                                                                                                                                                                1001 xchg %ax, mutex
    80 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    80 1010 jgt .top
    81 1011 halt
    82 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    82 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    82                                                   1002 test $0, %ax
    83                                                   1003 jne  .acquire
    84 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    84                                                                            1002 test $0, %ax
    85                                                                            1003 jne  .acquire
    86 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    86                                                                                                     1002 test $0, %ax
    87                                                                                                     1003 jne  .acquire
    88 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    88                                                                                                                              1002 test $0, %ax
    89                                                                                                                              1003 jne  .acquire
    90 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    90                                                                                                                                                       1002 test $0, %ax
    91                                                                                                                                                       1003 jne  .acquire
    92 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    92                                                                                                                                                                                1002 test $0, %ax
    93                                                                                                                                                                                1003 jne  .acquire
    94 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    94                          1002 test $0, %ax
    95                          1003 jne  .acquire
    96 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    96                                                   1000 mov  $1, %ax
    97                                                   1001 xchg %ax, mutex
    98 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    98                                                                            1000 mov  $1, %ax
    99                                                                            1001 xchg %ax, mutex
   100 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   100                                                                                                     1000 mov  $1, %ax
   101                                                                                                     1001 xchg %ax, mutex
   102 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   102                                                                                                                              1000 mov  $1, %ax
   103                                                                                                                              1001 xchg %ax, mutex
   104 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   104                                                                                                                                                       1000 mov  $1, %ax
   105                                                                                                                                                       1001 xchg %ax, mutex
   106 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   106                                                                                                                                                                                1000 mov  $1, %ax
   107                                                                                                                                                                                1001 xchg %ax, mutex
   108 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   108                          1004 mov  count, %ax
   109                          1005 add  $1, %ax
   110 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   110                                                   1002 test $0, %ax
   111                                                   1003 jne  .acquire
   112 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   112                                                                            1002 test $0, %ax
   113                                                                            1003 jne  .acquire
   114 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   114                                                                                                     1002 test $0, %ax
   115                                                                                                     1003 jne  .acquire
   116 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   116                                                                                                                              1002 test $0, %ax
   117                                                                                                                              1003 jne  .acquire
   118 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   118                                                                                                                                                       1002 test $0, %ax
   119                                                                                                                                                       1003 jne  .acquire
   120 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   120                                                                                                                                                                                1002 test $0, %ax
   121                                                                                                                                                                                1003 jne  .acquire
   122 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   122                          1006 mov  %ax, count
   123                          1007 mov  $0, mutex
   124 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   124                                                   1000 mov  $1, %ax
   125                                                   1001 xchg %ax, mutex
   126 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   126                                                                            1000 mov  $1, %ax
   127                                                                            1001 xchg %ax, mutex
   128 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   128                                                                                                     1000 mov  $1, %ax
   129                                                                                                     1001 xchg %ax, mutex
   130 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   130                                                                                                                              1000 mov  $1, %ax
   131                                                                                                                              1001 xchg %ax, mutex
   132 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   132                                                                                                                                                       1000 mov  $1, %ax
   133                                                                                                                                                       1001 xchg %ax, mutex
   134 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   134                                                                                                                                                                                1000 mov  $1, %ax
   135                                                                                                                                                                                1001 xchg %ax, mutex
   136 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   136                          1008 sub  $1, %bx
   137                          1009 test $0, %bx
   138 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   138                                                   1002 test $0, %ax
   139                                                   1003 jne  .acquire
   140 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   140                                                                            1002 test $0, %ax
   141                                                                            1003 jne  .acquire
   142 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   142                                                                                                     1002 test $0, %ax
   143                                                                                                     1003 jne  .acquire
   144 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   144                                                                                                                              1002 test $0, %ax
   145                                                                                                                              1003 jne  .acquire
   146 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   146                                                                                                                                                       1002 test $0, %ax
   147                                                                                                                                                       1003 jne  .acquire
   148 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   148                                                                                                                                                                                1002 test $0, %ax
   149                                                                                                                                                                                1003 jne  .acquire
   150 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   150                          1010 jgt .top
   151                          1011 halt
   152 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   152 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   152                                                                            1000 mov  $1, %ax
   153                                                                            1001 xchg %ax, mutex
   154 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   154                                                                                                     1000 mov  $1, %ax
   155                                                                                                     1001 xchg %ax, mutex
   156 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   156                                                                                                                              1000 mov  $1, %ax
   157                                                                                                                              1001 xchg %ax, mutex
   158 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   158                                                                                                                                                       1000 mov  $1, %ax
   159                                                                                                                                                       1001 xchg %ax, mutex
   160 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   160                                                                                                                                                                                1000 mov  $1, %ax
   161                                                                                                                                                                                1001 xchg %ax, mutex
   162 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   162                                                   1004 mov  count, %ax
   163                                                   1005 add  $1, %ax
   164 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   164                                                                            1002 test $0, %ax
   165                                                                            1003 jne  .acquire
   166 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   166                                                                                                     1002 test $0, %ax
   167                                                                                                     1003 jne  .acquire
   168 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   168                                                                                                                              1002 test $0, %ax
   169                                                                                                                              1003 jne  .acquire
   170 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   170                                                                                                                                                       1002 test $0, %ax
   171                                                                                                                                                       1003 jne  .acquire
   172 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   172                                                                                                                                                                                1002 test $0, %ax
   173                                                                                                                                                                                1003 jne  .acquire
   174 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   174                                                   1006 mov  %ax, count
   175                                                   1007 mov  $0, mutex
   176 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   176                                                                            1000 mov  $1, %ax
   177                                                                            1001 xchg %ax, mutex
   178 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   178                                                                                                     1000 mov  $1, %ax
   179                                                                                                     1001 xchg %ax, mutex
   180 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   180                                                                                                                              1000 mov  $1, %ax
   181                                                                                                                              1001 xchg %ax, mutex
   182 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   182                                                                                                                                                       1000 mov  $1, %ax
   183                                                                                                                                                       1001 xchg %ax, mutex
   184 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   184                                                                                                                                                                                1000 mov  $1, %ax
   185                                                                                                                                                                                1001 xchg %ax, mutex
   186 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   186                                                   1008 sub  $1, %bx
   187                                                   1009 test $0, %bx
   188 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   188                                                                            1002 test $0, %ax
   189                                                                            1003 jne  .acquire
   190 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   190                                                                                                     1002 test $0, %ax
   191                                                                                                     1003 jne  .acquire
   192 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   192                                                                                                                              1002 test $0, %ax
   193                                                                                                                              1003 jne  .acquire
   194 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   194                                                                                                                                                       1002 test $0, %ax
   195                                                                                                                                                       1003 jne  .acquire
   196 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   196                                                                                                                                                                                1002 test $0, %ax
   197                                                                                                                                                                                1003 jne  .acquire
   198 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   198                                                   1010 jgt .top
   199                                                   1011 halt
   200 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   200 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   200                                                                                                     1000 mov  $1, %ax
   201                                                                                                     1001 xchg %ax, mutex
   202 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   202                                                                                                                              1000 mov  $1, %ax
   203                                                                                                                              1001 xchg %ax, mutex
   204 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   204                                                                                                                                                       1000 mov  $1, %ax
   205                                                                                                                                                       1001 xchg %ax, mutex
   206 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   206                                                                                                                                                                                1000 mov  $1, %ax
   207                                                                                                                                                                                1001 xchg %ax, mutex
   208 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   208                                                                            1004 mov  count, %ax
   209                                                                            1005 add  $1, %ax
   210 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   210                                                                                                     1002 test $0, %ax
   211                                                                                                     1003 jne  .acquire
   212 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   212                                                                                                                              1002 test $0, %ax
   213                                                                                                                              1003 jne  .acquire
   214 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   214                                                                                                                                                       1002 test $0, %ax
   215                                                                                                                                                       1003 jne  .acquire
   216 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   216                                                                                                                                                                                1002 test $0, %ax
   217                                                                                                                                                                                1003 jne  .acquire
   218 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   218                                                                            1006 mov  %ax, count
   219                                                                            1007 mov  $0, mutex
   220 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   220                                                                                                     1000 mov  $1, %ax
   221                                                                                                     1001 xchg %ax, mutex
   222 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   222                                                                                                                              1000 mov  $1, %ax
   223                                                                                                                              1001 xchg %ax, mutex
   224 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   224                                                                                                                                                       1000 mov  $1, %ax
   225                                                                                                                                                       1001 xchg %ax, mutex
   226 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   226                                                                                                                                                                                1000 mov  $1, %ax
   227                                                                                                                                                                                1001 xchg %ax, mutex
   228 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   228                                                                            1008 sub  $1, %bx
   229                                                                            1009 test $0, %bx
   230 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   230                                                                                                     1002 test $0, %ax
   231                                                                                                     1003 jne  .acquire
   232 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   232                                                                                                                              1002 test $0, %ax
   233                                                                                                                              1003 jne  .acquire
   234 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   234                                                                                                                                                       1002 test $0, %ax
   235                                                                                                                                                       1003 jne  .acquire
   236 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   236                                                                                                                                                                                1002 test $0, %ax
   237                                                                                                                                                                                1003 jne  .acquire
   238 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   238                                                                            1010 jgt .top
   239                                                                            1011 halt
   240 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   240 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   240                                                                                                                              1000 mov  $1, %ax
   241                                                                                                                              1001 xchg %ax, mutex
   242 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   242                                                                                                                                                       1000 mov  $1, %ax
   243                                                                                                                                                       1001 xchg %ax, mutex
   244 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   244                                                                                                                                                                                1000 mov  $1, %ax
   245                                                                                                                                                                                1001 xchg %ax, mutex
   246 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   246                                                                                                     1004 mov  count, %ax
   247                                                                                                     1005 add  $1, %ax
   248 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   248                                                                                                                              1002 test $0, %ax
   249                                                                                                                              1003 jne  .acquire
   250 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   250                                                                                                                                                       1002 test $0, %ax
   251                                                                                                                                                       1003 jne  .acquire
   252 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   252                                                                                                                                                                                1002 test $0, %ax
   253                                                                                                                                                                                1003 jne  .acquire
   254 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   254                                                                                                     1006 mov  %ax, count
   255                                                                                                     1007 mov  $0, mutex
   256 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   256                                                                                                                              1000 mov  $1, %ax
   257                                                                                                                              1001 xchg %ax, mutex
   258 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   258                                                                                                                                                       1000 mov  $1, %ax
   259                                                                                                                                                       1001 xchg %ax, mutex
   260 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   260                                                                                                                                                                                1000 mov  $1, %ax
   261                                                                                                                                                                                1001 xchg %ax, mutex
   262 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   262                                                                                                     1008 sub  $1, %bx
   263                                                                                                     1009 test $0, %bx
   264 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   264                                                                                                                              1002 test $0, %ax
   265                                                                                                                              1003 jne  .acquire
   266 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   266                                                                                                                                                       1002 test $0, %ax
   267                                                                                                                                                       1003 jne  .acquire
   268 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   268                                                                                                                                                                                1002 test $0, %ax
   269                                                                                                                                                                                1003 jne  .acquire
   270 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   270                                                                                                     1010 jgt .top
   271                                                                                                     1011 halt
   272 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   272 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   272                                                                                                                                                       1000 mov  $1, %ax
   273                                                                                                                                                       1001 xchg %ax, mutex
   274 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   274                                                                                                                                                                                1000 mov  $1, %ax
   275                                                                                                                                                                                1001 xchg %ax, mutex
   276 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   276                                                                                                                              1004 mov  count, %ax
   277                                                                                                                              1005 add  $1, %ax
   278 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   278                                                                                                                                                       1002 test $0, %ax
   279                                                                                                                                                       1003 jne  .acquire
   280 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   280                                                                                                                                                                                1002 test $0, %ax
   281                                                                                                                                                                                1003 jne  .acquire
   282 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   282                                                                                                                              1006 mov  %ax, count
   283                                                                                                                              1007 mov  $0, mutex
   284 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   284                                                                                                                                                       1000 mov  $1, %ax
   285                                                                                                                                                       1001 xchg %ax, mutex
   286 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   286                                                                                                                                                                                1000 mov  $1, %ax
   287                                                                                                                                                                                1001 xchg %ax, mutex
   288 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   288                                                                                                                              1008 sub  $1, %bx
   289                                                                                                                              1009 test $0, %bx
   290 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   290                                                                                                                                                       1002 test $0, %ax
   291                                                                                                                                                       1003 jne  .acquire
   292 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   292                                                                                                                                                                                1002 test $0, %ax
   293                                                                                                                                                                                1003 jne  .acquire
   294 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   294                                                                                                                              1010 jgt .top
   295                                                                                                                              1011 halt
   296 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   296 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   296                                                                                                                                                                                1000 mov  $1, %ax
   297                                                                                                                                                                                1001 xchg %ax, mutex
   298 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   298                                                                                                                                                       1004 mov  count, %ax
   299                                                                                                                                                       1005 add  $1, %ax
   300 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   300                                                                                                                                                                                1002 test $0, %ax
   301                                                                                                                                                                                1003 jne  .acquire
   302 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   302                                                                                                                                                       1006 mov  %ax, count
   303                                                                                                                                                       1007 mov  $0, mutex
   304 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   304                                                                                                                                                                                1000 mov  $1, %ax
   305                                                                                                                                                                                1001 xchg %ax, mutex
   306 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   306                                                                                                                                                       1008 sub  $1, %bx
   307                                                                                                                                                       1009 test $0, %bx
   308 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   308                                                                                                                                                                                1002 test $0, %ax
   309                                                                                                                                                                                1003 jne  .acquire
   310 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   310                                                                                                                                                       1010 jgt .top
   311                                                                                                                                                       1011 halt
   312 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   312 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   312                                                                                                                                                                                1004 mov  count, %ax
   313                                                                                                                                                                                1005 add  $1, %ax
   314 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   314                                                                                                                                                                                1006 mov  %ax, count
   315                                                                                                                                                                                1007 mov  $0, mutex
   316 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   316                                                                                                                                                                                1008 sub  $1, %bx
   317                                                                                                                                                                                1009 test $0, %bx
   318 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   318                                                                                                                                                                                1010 jgt .top
   319                                                                                                                                                                                1011 halt

STATS:: Instructions    320
STATS:: Emulation Rate  75.88 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 3
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     3                          1000 mov  $1, %ax
     4                          1001 xchg %ax, mutex
     5                          1002 test $0, %ax
     6 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     6                                                   1000 mov  $1, %ax
     7                                                   1001 xchg %ax, mutex
     8                                                   1002 test $0, %ax
     9 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     9                                                                            1000 mov  $1, %ax
    10                                                                            1001 xchg %ax, mutex
    11                                                                            1002 test $0, %ax
    12 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    12                                                                                                     1000 mov  $1, %ax
    13                                                                                                     1001 xchg %ax, mutex
    14                                                                                                     1002 test $0, %ax
    15 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    15                                                                                                                              1000 mov  $1, %ax
    16                                                                                                                              1001 xchg %ax, mutex
    17                                                                                                                              1002 test $0, %ax
    18 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    18                                                                                                                                                       1000 mov  $1, %ax
    19                                                                                                                                                       1001 xchg %ax, mutex
    20                                                                                                                                                       1002 test $0, %ax
    21 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    21                                                                                                                                                                                1000 mov  $1, %ax
    22                                                                                                                                                                                1001 xchg %ax, mutex
    23                                                                                                                                                                                1002 test $0, %ax
    24 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    24 1003 jne  .acquire
    25 1004 mov  count, %ax
    26 1005 add  $1, %ax
    27 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    27                          1003 jne  .acquire
    28                          1000 mov  $1, %ax
    29                          1001 xchg %ax, mutex
    30 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    30                                                   1003 jne  .acquire
    31                                                   1000 mov  $1, %ax
    32                                                   1001 xchg %ax, mutex
    33 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    33                                                                            1003 jne  .acquire
    34                                                                            1000 mov  $1, %ax
    35                                                                            1001 xchg %ax, mutex
    36 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    36                                                                                                     1003 jne  .acquire
    37                                                                                                     1000 mov  $1, %ax
    38                                                                                                     1001 xchg %ax, mutex
    39 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    39                                                                                                                              1003 jne  .acquire
    40                                                                                                                              1000 mov  $1, %ax
    41                                                                                                                              1001 xchg %ax, mutex
    42 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    42                                                                                                                                                       1003 jne  .acquire
    43                                                                                                                                                       1000 mov  $1, %ax
    44                                                                                                                                                       1001 xchg %ax, mutex
    45 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    45                                                                                                                                                                                1003 jne  .acquire
    46                                                                                                                                                                                1000 mov  $1, %ax
    47                                                                                                                                                                                1001 xchg %ax, mutex
    48 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    48 1006 mov  %ax, count
    49 1007 mov  $0, mutex
    50 1008 sub  $1, %bx
    51 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    51                          1002 test $0, %ax
    52                          1003 jne  .acquire
    53                          1000 mov  $1, %ax
    54 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    54                                                   1002 test $0, %ax
    55                                                   1003 jne  .acquire
    56                                                   1000 mov  $1, %ax
    57 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    57                                                                            1002 test $0, %ax
    58                                                                            1003 jne  .acquire
    59                                                                            1000 mov  $1, %ax
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                                                     1002 test $0, %ax
    61                                                                                                     1003 jne  .acquire
    62                                                                                                     1000 mov  $1, %ax
    63 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    63                                                                                                                              1002 test $0, %ax
    64                                                                                                                              1003 jne  .acquire
    65                                                                                                                              1000 mov  $1, %ax
    66 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    66                                                                                                                                                       1002 test $0, %ax
    67                                                                                                                                                       1003 jne  .acquire
    68                                                                                                                                                       1000 mov  $1, %ax
    69 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    69                                                                                                                                                                                1002 test $0, %ax
    70                                                                                                                                                                                1003 jne  .acquire
    71                                                                                                                                                                                1000 mov  $1, %ax
    72 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    72 1009 test $0, %bx
    73 1010 jgt .top
    74 1011 halt
    75 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    75 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    75                                                   1001 xchg %ax, mutex
    76                                                   1002 test $0, %ax
    77                                                   1003 jne  .acquire
    78 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    78                                                                            1001 xchg %ax, mutex
    79                                                                            1002 test $0, %ax
    80                                                                            1003 jne  .acquire
    81 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    81                                                                                                     1001 xchg %ax, mutex
    82                                                                                                     1002 test $0, %ax
    83                                                                                                     1003 jne  .acquire
    84 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    84                                                                                                                              1001 xchg %ax, mutex
    85                                                                                                                              1002 test $0, %ax
    86                                                                                                                              1003 jne  .acquire
    87 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    87                                                                                                                                                       1001 xchg %ax, mutex
    88                                                                                                                                                       1002 test $0, %ax
    89                                                                                                                                                       1003 jne  .acquire
    90 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    90                                                                                                                                                                                1001 xchg %ax, mutex
    91                                                                                                                                                                                1002 test $0, %ax
    92                                                                                                                                                                                1003 jne  .acquire
    93 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    93                          1001 xchg %ax, mutex
    94                          1002 test $0, %ax
    95                          1003 jne  .acquire
    96 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    96                                                   1004 mov  count, %ax
    97                                                   1005 add  $1, %ax
    98                                                   1006 mov  %ax, count
    99 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    99                                                                            1000 mov  $1, %ax
   100                                                                            1001 xchg %ax, mutex
   101                                                                            1002 test $0, %ax
   102 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   102                                                                                                     1000 mov  $1, %ax
   103                                                                                                     1001 xchg %ax, mutex
   104                                                                                                     1002 test $0, %ax
   105 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   105                                                                                                                              1000 mov  $1, %ax
   106                                                                                                                              1001 xchg %ax, mutex
   107                                                                                                                              1002 test $0, %ax
   108 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   108                                                                                                                                                       1000 mov  $1, %ax
   109                                                                                                                                                       1001 xchg %ax, mutex
   110                                                                                                                                                       1002 test $0, %ax
   111 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   111                                                                                                                                                                                1000 mov  $1, %ax
   112                                                                                                                                                                                1001 xchg %ax, mutex
   113                                                                                                                                                                                1002 test $0, %ax
   114 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   114                          1000 mov  $1, %ax
   115                          1001 xchg %ax, mutex
   116                          1002 test $0, %ax
   117 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   117                                                   1007 mov  $0, mutex
   118                                                   1008 sub  $1, %bx
   119                                                   1009 test $0, %bx
   120 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   120                                                                            1003 jne  .acquire
   121                                                                            1000 mov  $1, %ax
   122                                                                            1001 xchg %ax, mutex
   123 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   123                                                                                                     1003 jne  .acquire
   124                                                                                                     1000 mov  $1, %ax
   125                                                                                                     1001 xchg %ax, mutex
   126 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   126                                                                                                                              1003 jne  .acquire
   127                                                                                                                              1000 mov  $1, %ax
   128                                                                                                                              1001 xchg %ax, mutex
   129 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   129                                                                                                                                                       1003 jne  .acquire
   130                                                                                                                                                       1000 mov  $1, %ax
   131                                                                                                                                                       1001 xchg %ax, mutex
   132 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   132                                                                                                                                                                                1003 jne  .acquire
   133                                                                                                                                                                                1000 mov  $1, %ax
   134                                                                                                                                                                                1001 xchg %ax, mutex
   135 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   135                          1003 jne  .acquire
   136                          1000 mov  $1, %ax
   137                          1001 xchg %ax, mutex
   138 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   138                                                   1010 jgt .top
   139                                                   1011 halt
   140 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   140                                                                            1002 test $0, %ax
   141 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   141                                                                                                     1002 test $0, %ax
   142                                                                                                     1003 jne  .acquire
   143                                                                                                     1000 mov  $1, %ax
   144 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   144                                                                                                                              1002 test $0, %ax
   145                                                                                                                              1003 jne  .acquire
   146                                                                                                                              1000 mov  $1, %ax
   147 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   147                                                                                                                                                       1002 test $0, %ax
   148                                                                                                                                                       1003 jne  .acquire
   149                                                                                                                                                       1000 mov  $1, %ax
   150 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   150                                                                                                                                                                                1002 test $0, %ax
   151                                                                                                                                                                                1003 jne  .acquire
   152                                                                                                                                                                                1000 mov  $1, %ax
   153 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   153                          1002 test $0, %ax
   154                          1003 jne  .acquire
   155                          1000 mov  $1, %ax
   156 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   156                                                                            1003 jne  .acquire
   157                                                                            1004 mov  count, %ax
   158                                                                            1005 add  $1, %ax
   159 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   159                                                                                                     1001 xchg %ax, mutex
   160                                                                                                     1002 test $0, %ax
   161                                                                                                     1003 jne  .acquire
   162 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   162                                                                                                                              1001 xchg %ax, mutex
   163                                                                                                                              1002 test $0, %ax
   164                                                                                                                              1003 jne  .acquire
   165 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   165                                                                                                                                                       1001 xchg %ax, mutex
   166                                                                                                                                                       1002 test $0, %ax
   167                                                                                                                                                       1003 jne  .acquire
   168 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   168                                                                                                                                                                                1001 xchg %ax, mutex
   169                                                                                                                                                                                1002 test $0, %ax
   170                                                                                                                                                                                1003 jne  .acquire
   171 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   171                          1001 xchg %ax, mutex
   172                          1002 test $0, %ax
   173                          1003 jne  .acquire
   174 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   174                                                                            1006 mov  %ax, count
   175                                                                            1007 mov  $0, mutex
   176                                                                            1008 sub  $1, %bx
   177 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   177                                                                                                     1000 mov  $1, %ax
   178                                                                                                     1001 xchg %ax, mutex
   179                                                                                                     1002 test $0, %ax
   180 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   180                                                                                                                              1000 mov  $1, %ax
   181                                                                                                                              1001 xchg %ax, mutex
   182                                                                                                                              1002 test $0, %ax
   183 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   183                                                                                                                                                       1000 mov  $1, %ax
   184                                                                                                                                                       1001 xchg %ax, mutex
   185                                                                                                                                                       1002 test $0, %ax
   186 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   186                                                                                                                                                                                1000 mov  $1, %ax
   187                                                                                                                                                                                1001 xchg %ax, mutex
   188                                                                                                                                                                                1002 test $0, %ax
   189 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   189                          1000 mov  $1, %ax
   190                          1001 xchg %ax, mutex
   191                          1002 test $0, %ax
   192 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   192                                                                            1009 test $0, %bx
   193                                                                            1010 jgt .top
   194                                                                            1011 halt
   195 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   195 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   195                                                                                                                              1003 jne  .acquire
   196                                                                                                                              1000 mov  $1, %ax
   197                                                                                                                              1001 xchg %ax, mutex
   198 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   198                                                                                                                                                       1003 jne  .acquire
   199                                                                                                                                                       1000 mov  $1, %ax
   200                                                                                                                                                       1001 xchg %ax, mutex
   201 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   201                                                                                                                                                                                1003 jne  .acquire
   202                                                                                                                                                                                1000 mov  $1, %ax
   203                                                                                                                                                                                1001 xchg %ax, mutex
   204 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   204                          1003 jne  .acquire
   205                          1000 mov  $1, %ax
   206                          1001 xchg %ax, mutex
   207 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   207                                                                                                     1003 jne  .acquire
   208                                                                                                     1004 mov  count, %ax
   209                                                                                                     1005 add  $1, %ax
   210 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   210                                                                                                                              1002 test $0, %ax
   211                                                                                                                              1003 jne  .acquire
   212                                                                                                                              1000 mov  $1, %ax
   213 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   213                                                                                                                                                       1002 test $0, %ax
   214                                                                                                                                                       1003 jne  .acquire
   215                                                                                                                                                       1000 mov  $1, %ax
   216 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   216                                                                                                                                                                                1002 test $0, %ax
   217                                                                                                                                                                                1003 jne  .acquire
   218                                                                                                                                                                                1000 mov  $1, %ax
   219 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   219                          1002 test $0, %ax
   220                          1003 jne  .acquire
   221                          1000 mov  $1, %ax
   222 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   222                                                                                                     1006 mov  %ax, count
   223                                                                                                     1007 mov  $0, mutex
   224                                                                                                     1008 sub  $1, %bx
   225 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   225                                                                                                                              1001 xchg %ax, mutex
   226                                                                                                                              1002 test $0, %ax
   227                                                                                                                              1003 jne  .acquire
   228 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   228                                                                                                                                                       1001 xchg %ax, mutex
   229                                                                                                                                                       1002 test $0, %ax
   230                                                                                                                                                       1003 jne  .acquire
   231 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   231                                                                                                                                                                                1001 xchg %ax, mutex
   232                                                                                                                                                                                1002 test $0, %ax
   233                                                                                                                                                                                1003 jne  .acquire
   234 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   234                          1001 xchg %ax, mutex
   235                          1002 test $0, %ax
   236                          1003 jne  .acquire
   237 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   237                                                                                                     1009 test $0, %bx
   238                                                                                                     1010 jgt .top
   239                                                                                                     1011 halt
   240 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   240 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   240                                                                                                                                                       1000 mov  $1, %ax
   241                                                                                                                                                       1001 xchg %ax, mutex
   242                                                                                                                                                       1002 test $0, %ax
   243 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   243                                                                                                                                                                                1000 mov  $1, %ax
   244                                                                                                                                                                                1001 xchg %ax, mutex
   245                                                                                                                                                                                1002 test $0, %ax
   246 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   246                          1000 mov  $1, %ax
   247                          1001 xchg %ax, mutex
   248                          1002 test $0, %ax
   249 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   249                                                                                                                              1004 mov  count, %ax
   250                                                                                                                              1005 add  $1, %ax
   251                                                                                                                              1006 mov  %ax, count
   252 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   252                                                                                                                                                       1003 jne  .acquire
   253                                                                                                                                                       1000 mov  $1, %ax
   254                                                                                                                                                       1001 xchg %ax, mutex
   255 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   255                                                                                                                                                                                1003 jne  .acquire
   256                                                                                                                                                                                1000 mov  $1, %ax
   257                                                                                                                                                                                1001 xchg %ax, mutex
   258 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   258                          1003 jne  .acquire
   259                          1000 mov  $1, %ax
   260                          1001 xchg %ax, mutex
   261 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   261                                                                                                                              1007 mov  $0, mutex
   262                                                                                                                              1008 sub  $1, %bx
   263                                                                                                                              1009 test $0, %bx
   264 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   264                                                                                                                                                       1002 test $0, %ax
   265                                                                                                                                                       1003 jne  .acquire
   266                                                                                                                                                       1000 mov  $1, %ax
   267 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   267                                                                                                                                                                                1002 test $0, %ax
   268                                                                                                                                                                                1003 jne  .acquire
   269                                                                                                                                                                                1000 mov  $1, %ax
   270 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   270                          1002 test $0, %ax
   271                          1003 jne  .acquire
   272                          1000 mov  $1, %ax
   273 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   273                                                                                                                              1010 jgt .top
   274                                                                                                                              1011 halt
   275 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   275                                                                                                                                                       1001 xchg %ax, mutex
   276 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   276                                                                                                                                                                                1001 xchg %ax, mutex
   277                                                                                                                                                                                1002 test $0, %ax
   278                                                                                                                                                                                1003 jne  .acquire
   279 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   279                          1001 xchg %ax, mutex
   280                          1002 test $0, %ax
   281                          1003 jne  .acquire
   282 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   282                                                                                                                                                       1002 test $0, %ax
   283                                                                                                                                                       1003 jne  .acquire
   284                                                                                                                                                       1004 mov  count, %ax
   285 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   285                                                                                                                                                                                1000 mov  $1, %ax
   286                                                                                                                                                                                1001 xchg %ax, mutex
   287                                                                                                                                                                                1002 test $0, %ax
   288 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   288                          1000 mov  $1, %ax
   289                          1001 xchg %ax, mutex
   290                          1002 test $0, %ax
   291 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   291                                                                                                                                                       1005 add  $1, %ax
   292                                                                                                                                                       1006 mov  %ax, count
   293                                                                                                                                                       1007 mov  $0, mutex
   294 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   294                                                                                                                                                                                1003 jne  .acquire
   295                                                                                                                                                                                1000 mov  $1, %ax
   296                                                                                                                                                                                1001 xchg %ax, mutex
   297 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   297                          1003 jne  .acquire
   298                          1000 mov  $1, %ax
   299                          1001 xchg %ax, mutex
   300 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   300                                                                                                                                                       1008 sub  $1, %bx
   301                                                                                                                                                       1009 test $0, %bx
   302                                                                                                                                                       1010 jgt .top
   303 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   303                                                                                                                                                                                1002 test $0, %ax
   304                                                                                                                                                                                1003 jne  .acquire
   305                                                                                                                                                                                1004 mov  count, %ax
   306 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   306                          1002 test $0, %ax
   307                          1003 jne  .acquire
   308                          1000 mov  $1, %ax
   309 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   309                                                                                                                                                       1011 halt
   310 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   310                                                                                                                                                                                1005 add  $1, %ax
   311                                                                                                                                                                                1006 mov  %ax, count
   312 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   312                          1001 xchg %ax, mutex
   313                          1002 test $0, %ax
   314                          1003 jne  .acquire
   315 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   315                                                                                                                                                                                1007 mov  $0, mutex
   316                                                                                                                                                                                1008 sub  $1, %bx
   317                                                                                                                                                                                1009 test $0, %bx
   318 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   318                          1000 mov  $1, %ax
   319                          1001 xchg %ax, mutex
   320                          1002 test $0, %ax
   321 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   321                                                                                                                                                                                1010 jgt .top
   322                                                                                                                                                                                1011 halt
   323 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   323                          1003 jne  .acquire
   324 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   324                          1004 mov  count, %ax
   325                          1005 add  $1, %ax
   326                          1006 mov  %ax, count
   327 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   327                          1007 mov  $0, mutex
   328                          1008 sub  $1, %bx
   329                          1009 test $0, %bx
   330 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   330                          1010 jgt .top
   331                          1011 halt

STATS:: Instructions    332
STATS:: Emulation Rate  89.54 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 4
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     4                          1000 mov  $1, %ax
     5                          1001 xchg %ax, mutex
     6                          1002 test $0, %ax
     7                          1003 jne  .acquire
     8 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     8                                                   1000 mov  $1, %ax
     9                                                   1001 xchg %ax, mutex
    10                                                   1002 test $0, %ax
    11                                                   1003 jne  .acquire
    12 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    12                                                                            1000 mov  $1, %ax
    13                                                                            1001 xchg %ax, mutex
    14                                                                            1002 test $0, %ax
    15                                                                            1003 jne  .acquire
    16 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    16                                                                                                     1000 mov  $1, %ax
    17                                                                                                     1001 xchg %ax, mutex
    18                                                                                                     1002 test $0, %ax
    19                                                                                                     1003 jne  .acquire
    20 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    20                                                                                                                              1000 mov  $1, %ax
    21                                                                                                                              1001 xchg %ax, mutex
    22                                                                                                                              1002 test $0, %ax
    23                                                                                                                              1003 jne  .acquire
    24 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    24                                                                                                                                                       1000 mov  $1, %ax
    25                                                                                                                                                       1001 xchg %ax, mutex
    26                                                                                                                                                       1002 test $0, %ax
    27                                                                                                                                                       1003 jne  .acquire
    28 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    28                                                                                                                                                                                1000 mov  $1, %ax
    29                                                                                                                                                                                1001 xchg %ax, mutex
    30                                                                                                                                                                                1002 test $0, %ax
    31                                                                                                                                                                                1003 jne  .acquire
    32 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    32 1004 mov  count, %ax
    33 1005 add  $1, %ax
    34 1006 mov  %ax, count
    35 1007 mov  $0, mutex
    36 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    36                          1000 mov  $1, %ax
    37                          1001 xchg %ax, mutex
    38                          1002 test $0, %ax
    39                          1003 jne  .acquire
    40 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    40                                                   1000 mov  $1, %ax
    41                                                   1001 xchg %ax, mutex
    42                                                   1002 test $0, %ax
    43                                                   1003 jne  .acquire
    44 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    44                                                                            1000 mov  $1, %ax
    45                                                                            1001 xchg %ax, mutex
    46                                                                            1002 test $0, %ax
    47                                                                            1003 jne  .acquire
    48 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    48                                                                                                     1000 mov  $1, %ax
    49                                                                                                     1001 xchg %ax, mutex
    50                                                                                                     1002 test $0, %ax
    51                                                                                                     1003 jne  .acquire
    52 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    52                                                                                                                              1000 mov  $1, %ax
    53                                                                                                                              1001 xchg %ax, mutex
    54                                                                                                                              1002 test $0, %ax
    55                                                                                                                              1003 jne  .acquire
    56 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    56                                                                                                                                                       1000 mov  $1, %ax
    57                                                                                                                                                       1001 xchg %ax, mutex
    58                                                                                                                                                       1002 test $0, %ax
    59                                                                                                                                                       1003 jne  .acquire
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                                                                                                                                1000 mov  $1, %ax
    61                                                                                                                                                                                1001 xchg %ax, mutex
    62                                                                                                                                                                                1002 test $0, %ax
    63                                                                                                                                                                                1003 jne  .acquire
    64 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    64 1008 sub  $1, %bx
    65 1009 test $0, %bx
    66 1010 jgt .top
    67 1011 halt
    68 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    68 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    68                                                   1000 mov  $1, %ax
    69                                                   1001 xchg %ax, mutex
    70                                                   1002 test $0, %ax
    71                                                   1003 jne  .acquire
    72 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    72                                                                            1000 mov  $1, %ax
    73                                                                            1001 xchg %ax, mutex
    74                                                                            1002 test $0, %ax
    75                                                                            1003 jne  .acquire
    76 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    76                                                                                                     1000 mov  $1, %ax
    77                                                                                                     1001 xchg %ax, mutex
    78                                                                                                     1002 test $0, %ax
    79                                                                                                     1003 jne  .acquire
    80 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    80                                                                                                                              1000 mov  $1, %ax
    81                                                                                                                              1001 xchg %ax, mutex
    82                                                                                                                              1002 test $0, %ax
    83                                                                                                                              1003 jne  .acquire
    84 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    84                                                                                                                                                       1000 mov  $1, %ax
    85                                                                                                                                                       1001 xchg %ax, mutex
    86                                                                                                                                                       1002 test $0, %ax
    87                                                                                                                                                       1003 jne  .acquire
    88 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    88                                                                                                                                                                                1000 mov  $1, %ax
    89                                                                                                                                                                                1001 xchg %ax, mutex
    90                                                                                                                                                                                1002 test $0, %ax
    91                                                                                                                                                                                1003 jne  .acquire
    92 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    92                          1004 mov  count, %ax
    93                          1005 add  $1, %ax
    94                          1006 mov  %ax, count
    95                          1007 mov  $0, mutex
    96 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    96                                                   1000 mov  $1, %ax
    97                                                   1001 xchg %ax, mutex
    98                                                   1002 test $0, %ax
    99                                                   1003 jne  .acquire
   100 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   100                                                                            1000 mov  $1, %ax
   101                                                                            1001 xchg %ax, mutex
   102                                                                            1002 test $0, %ax
   103                                                                            1003 jne  .acquire
   104 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   104                                                                                                     1000 mov  $1, %ax
   105                                                                                                     1001 xchg %ax, mutex
   106                                                                                                     1002 test $0, %ax
   107                                                                                                     1003 jne  .acquire
   108 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   108                                                                                                                              1000 mov  $1, %ax
   109                                                                                                                              1001 xchg %ax, mutex
   110                                                                                                                              1002 test $0, %ax
   111                                                                                                                              1003 jne  .acquire
   112 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   112                                                                                                                                                       1000 mov  $1, %ax
   113                                                                                                                                                       1001 xchg %ax, mutex
   114                                                                                                                                                       1002 test $0, %ax
   115                                                                                                                                                       1003 jne  .acquire
   116 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   116                                                                                                                                                                                1000 mov  $1, %ax
   117                                                                                                                                                                                1001 xchg %ax, mutex
   118                                                                                                                                                                                1002 test $0, %ax
   119                                                                                                                                                                                1003 jne  .acquire
   120 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   120                          1008 sub  $1, %bx
   121                          1009 test $0, %bx
   122                          1010 jgt .top
   123                          1011 halt
   124 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   124 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   124                                                                            1000 mov  $1, %ax
   125                                                                            1001 xchg %ax, mutex
   126                                                                            1002 test $0, %ax
   127                                                                            1003 jne  .acquire
   128 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   128                                                                                                     1000 mov  $1, %ax
   129                                                                                                     1001 xchg %ax, mutex
   130                                                                                                     1002 test $0, %ax
   131                                                                                                     1003 jne  .acquire
   132 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   132                                                                                                                              1000 mov  $1, %ax
   133                                                                                                                              1001 xchg %ax, mutex
   134                                                                                                                              1002 test $0, %ax
   135                                                                                                                              1003 jne  .acquire
   136 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   136                                                                                                                                                       1000 mov  $1, %ax
   137                                                                                                                                                       1001 xchg %ax, mutex
   138                                                                                                                                                       1002 test $0, %ax
   139                                                                                                                                                       1003 jne  .acquire
   140 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   140                                                                                                                                                                                1000 mov  $1, %ax
   141                                                                                                                                                                                1001 xchg %ax, mutex
   142                                                                                                                                                                                1002 test $0, %ax
   143                                                                                                                                                                                1003 jne  .acquire
   144 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   144                                                   1004 mov  count, %ax
   145                                                   1005 add  $1, %ax
   146                                                   1006 mov  %ax, count
   147                                                   1007 mov  $0, mutex
   148 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   148                                                                            1000 mov  $1, %ax
   149                                                                            1001 xchg %ax, mutex
   150                                                                            1002 test $0, %ax
   151                                                                            1003 jne  .acquire
   152 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   152                                                                                                     1000 mov  $1, %ax
   153                                                                                                     1001 xchg %ax, mutex
   154                                                                                                     1002 test $0, %ax
   155                                                                                                     1003 jne  .acquire
   156 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   156                                                                                                                              1000 mov  $1, %ax
   157                                                                                                                              1001 xchg %ax, mutex
   158                                                                                                                              1002 test $0, %ax
   159                                                                                                                              1003 jne  .acquire
   160 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   160                                                                                                                                                       1000 mov  $1, %ax
   161                                                                                                                                                       1001 xchg %ax, mutex
   162                                                                                                                                                       1002 test $0, %ax
   163                                                                                                                                                       1003 jne  .acquire
   164 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   164                                                                                                                                                                                1000 mov  $1, %ax
   165                                                                                                                                                                                1001 xchg %ax, mutex
   166                                                                                                                                                                                1002 test $0, %ax
   167                                                                                                                                                                                1003 jne  .acquire
   168 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   168                                                   1008 sub  $1, %bx
   169                                                   1009 test $0, %bx
   170                                                   1010 jgt .top
   171                                                   1011 halt
   172 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   172 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   172                                                                                                     1000 mov  $1, %ax
   173                                                                                                     1001 xchg %ax, mutex
   174                                                                                                     1002 test $0, %ax
   175                                                                                                     1003 jne  .acquire
   176 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   176                                                                                                                              1000 mov  $1, %ax
   177                                                                                                                              1001 xchg %ax, mutex
   178                                                                                                                              1002 test $0, %ax
   179                                                                                                                              1003 jne  .acquire
   180 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   180                                                                                                                                                       1000 mov  $1, %ax
   181                                                                                                                                                       1001 xchg %ax, mutex
   182                                                                                                                                                       1002 test $0, %ax
   183                                                                                                                                                       1003 jne  .acquire
   184 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   184                                                                                                                                                                                1000 mov  $1, %ax
   185                                                                                                                                                                                1001 xchg %ax, mutex
   186                                                                                                                                                                                1002 test $0, %ax
   187                                                                                                                                                                                1003 jne  .acquire
   188 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   188                                                                            1004 mov  count, %ax
   189                                                                            1005 add  $1, %ax
   190                                                                            1006 mov  %ax, count
   191                                                                            1007 mov  $0, mutex
   192 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   192                                                                                                     1000 mov  $1, %ax
   193                                                                                                     1001 xchg %ax, mutex
   194                                                                                                     1002 test $0, %ax
   195                                                                                                     1003 jne  .acquire
   196 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   196                                                                                                                              1000 mov  $1, %ax
   197                                                                                                                              1001 xchg %ax, mutex
   198                                                                                                                              1002 test $0, %ax
   199                                                                                                                              1003 jne  .acquire
   200 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   200                                                                                                                                                       1000 mov  $1, %ax
   201                                                                                                                                                       1001 xchg %ax, mutex
   202                                                                                                                                                       1002 test $0, %ax
   203                                                                                                                                                       1003 jne  .acquire
   204 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   204                                                                                                                                                                                1000 mov  $1, %ax
   205                                                                                                                                                                                1001 xchg %ax, mutex
   206                                                                                                                                                                                1002 test $0, %ax
   207                                                                                                                                                                                1003 jne  .acquire
   208 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   208                                                                            1008 sub  $1, %bx
   209                                                                            1009 test $0, %bx
   210                                                                            1010 jgt .top
   211                                                                            1011 halt
   212 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   212 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   212                                                                                                                              1000 mov  $1, %ax
   213                                                                                                                              1001 xchg %ax, mutex
   214                                                                                                                              1002 test $0, %ax
   215                                                                                                                              1003 jne  .acquire
   216 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   216                                                                                                                                                       1000 mov  $1, %ax
   217                                                                                                                                                       1001 xchg %ax, mutex
   218                                                                                                                                                       1002 test $0, %ax
   219                                                                                                                                                       1003 jne  .acquire
   220 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   220                                                                                                                                                                                1000 mov  $1, %ax
   221                                                                                                                                                                                1001 xchg %ax, mutex
   222                                                                                                                                                                                1002 test $0, %ax
   223                                                                                                                                                                                1003 jne  .acquire
   224 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   224                                                                                                     1004 mov  count, %ax
   225                                                                                                     1005 add  $1, %ax
   226                                                                                                     1006 mov  %ax, count
   227                                                                                                     1007 mov  $0, mutex
   228 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   228                                                                                                                              1000 mov  $1, %ax
   229                                                                                                                              1001 xchg %ax, mutex
   230                                                                                                                              1002 test $0, %ax
   231                                                                                                                              1003 jne  .acquire
   232 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   232                                                                                                                                                       1000 mov  $1, %ax
   233                                                                                                                                                       1001 xchg %ax, mutex
   234                                                                                                                                                       1002 test $0, %ax
   235                                                                                                                                                       1003 jne  .acquire
   236 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   236                                                                                                                                                                                1000 mov  $1, %ax
   237                                                                                                                                                                                1001 xchg %ax, mutex
   238                                                                                                                                                                                1002 test $0, %ax
   239                                                                                                                                                                                1003 jne  .acquire
   240 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   240                                                                                                     1008 sub  $1, %bx
   241                                                                                                     1009 test $0, %bx
   242                                                                                                     1010 jgt .top
   243                                                                                                     1011 halt
   244 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   244 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   244                                                                                                                                                       1000 mov  $1, %ax
   245                                                                                                                                                       1001 xchg %ax, mutex
   246                                                                                                                                                       1002 test $0, %ax
   247                                                                                                                                                       1003 jne  .acquire
   248 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   248                                                                                                                                                                                1000 mov  $1, %ax
   249                                                                                                                                                                                1001 xchg %ax, mutex
   250                                                                                                                                                                                1002 test $0, %ax
   251                                                                                                                                                                                1003 jne  .acquire
   252 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   252                                                                                                                              1004 mov  count, %ax
   253                                                                                                                              1005 add  $1, %ax
   254                                                                                                                              1006 mov  %ax, count
   255                                                                                                                              1007 mov  $0, mutex
   256 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   256                                                                                                                                                       1000 mov  $1, %ax
   257                                                                                                                                                       1001 xchg %ax, mutex
   258                                                                                                                                                       1002 test $0, %ax
   259                                                                                                                                                       1003 jne  .acquire
   260 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   260                                                                                                                                                                                1000 mov  $1, %ax
   261                                                                                                                                                                                1001 xchg %ax, mutex
   262                                                                                                                                                                                1002 test $0, %ax
   263                                                                                                                                                                                1003 jne  .acquire
   264 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   264                                                                                                                              1008 sub  $1, %bx
   265                                                                                                                              1009 test $0, %bx
   266                                                                                                                              1010 jgt .top
   267                                                                                                                              1011 halt
   268 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   268 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   268                                                                                                                                                                                1000 mov  $1, %ax
   269                                                                                                                                                                                1001 xchg %ax, mutex
   270                                                                                                                                                                                1002 test $0, %ax
   271                                                                                                                                                                                1003 jne  .acquire
   272 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   272                                                                                                                                                       1004 mov  count, %ax
   273                                                                                                                                                       1005 add  $1, %ax
   274                                                                                                                                                       1006 mov  %ax, count
   275                                                                                                                                                       1007 mov  $0, mutex
   276 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   276                                                                                                                                                                                1000 mov  $1, %ax
   277                                                                                                                                                                                1001 xchg %ax, mutex
   278                                                                                                                                                                                1002 test $0, %ax
   279                                                                                                                                                                                1003 jne  .acquire
   280 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   280                                                                                                                                                       1008 sub  $1, %bx
   281                                                                                                                                                       1009 test $0, %bx
   282                                                                                                                                                       1010 jgt .top
   283                                                                                                                                                       1011 halt
   284 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   284 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   284                                                                                                                                                                                1004 mov  count, %ax
   285                                                                                                                                                                                1005 add  $1, %ax
   286                                                                                                                                                                                1006 mov  %ax, count
   287                                                                                                                                                                                1007 mov  $0, mutex
   288 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   288                                                                                                                                                                                1008 sub  $1, %bx
   289                                                                                                                                                                                1009 test $0, %bx
   290                                                                                                                                                                                1010 jgt .top
   291                                                                                                                                                                                1011 halt

STATS:: Instructions    292
STATS:: Emulation Rate  94.56 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 5
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     5                          1000 mov  $1, %ax
     6                          1001 xchg %ax, mutex
     7                          1002 test $0, %ax
     8                          1003 jne  .acquire
     9                          1000 mov  $1, %ax
    10 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    10                                                   1000 mov  $1, %ax
    11                                                   1001 xchg %ax, mutex
    12                                                   1002 test $0, %ax
    13                                                   1003 jne  .acquire
    14                                                   1000 mov  $1, %ax
    15 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    15                                                                            1000 mov  $1, %ax
    16                                                                            1001 xchg %ax, mutex
    17                                                                            1002 test $0, %ax
    18                                                                            1003 jne  .acquire
    19                                                                            1000 mov  $1, %ax
    20 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    20                                                                                                     1000 mov  $1, %ax
    21                                                                                                     1001 xchg %ax, mutex
    22                                                                                                     1002 test $0, %ax
    23                                                                                                     1003 jne  .acquire
    24                                                                                                     1000 mov  $1, %ax
    25 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    25                                                                                                                              1000 mov  $1, %ax
    26                                                                                                                              1001 xchg %ax, mutex
    27                                                                                                                              1002 test $0, %ax
    28                                                                                                                              1003 jne  .acquire
    29                                                                                                                              1000 mov  $1, %ax
    30 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    30                                                                                                                                                       1000 mov  $1, %ax
    31                                                                                                                                                       1001 xchg %ax, mutex
    32                                                                                                                                                       1002 test $0, %ax
    33                                                                                                                                                       1003 jne  .acquire
    34                                                                                                                                                       1000 mov  $1, %ax
    35 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    35                                                                                                                                                                                1000 mov  $1, %ax
    36                                                                                                                                                                                1001 xchg %ax, mutex
    37                                                                                                                                                                                1002 test $0, %ax
    38                                                                                                                                                                                1003 jne  .acquire
    39                                                                                                                                                                                1000 mov  $1, %ax
    40 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    40 1005 add  $1, %ax
    41 1006 mov  %ax, count
    42 1007 mov  $0, mutex
    43 1008 sub  $1, %bx
    44 1009 test $0, %bx
    45 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    45                          1001 xchg %ax, mutex
    46                          1002 test $0, %ax
    47                          1003 jne  .acquire
    48                          1004 mov  count, %ax
    49                          1005 add  $1, %ax
    50 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    50                                                   1001 xchg %ax, mutex
    51                                                   1002 test $0, %ax
    52                                                   1003 jne  .acquire
    53                                                   1000 mov  $1, %ax
    54                                                   1001 xchg %ax, mutex
    55 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    55                                                                            1001 xchg %ax, mutex
    56                                                                            1002 test $0, %ax
    57                                                                            1003 jne  .acquire
    58                                                                            1000 mov  $1, %ax
    59                                                                            1001 xchg %ax, mutex
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                                                     1001 xchg %ax, mutex
    61                                                                                                     1002 test $0, %ax
    62                                                                                                     1003 jne  .acquire
    63                                                                                                     1000 mov  $1, %ax
    64                                                                                                     1001 xchg %ax, mutex
    65 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    65                                                                                                                              1001 xchg %ax, mutex
    66                                                                                                                              1002 test $0, %ax
    67                                                                                                                              1003 jne  .acquire
    68                                                                                                                              1000 mov  $1, %ax
    69                                                                                                                              1001 xchg %ax, mutex
    70 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    70                                                                                                                                                       1001 xchg %ax, mutex
    71                                                                                                                                                       1002 test $0, %ax
    72                                                                                                                                                       1003 jne  .acquire
    73                                                                                                                                                       1000 mov  $1, %ax
    74                                                                                                                                                       1001 xchg %ax, mutex
    75 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    75                                                                                                                                                                                1001 xchg %ax, mutex
    76                                                                                                                                                                                1002 test $0, %ax
    77                                                                                                                                                                                1003 jne  .acquire
    78                                                                                                                                                                                1000 mov  $1, %ax
    79                                                                                                                                                                                1001 xchg %ax, mutex
    80 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    80 1010 jgt .top
    81 1011 halt
    82 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    82                          1006 mov  %ax, count
    83                          1007 mov  $0, mutex
    84                          1008 sub  $1, %bx
    85 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    85                                                   1002 test $0, %ax
    86                                                   1003 jne  .acquire
    87                                                   1000 mov  $1, %ax
    88                                                   1001 xchg %ax, mutex
    89                                                   1002 test $0, %ax
    90 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    90                                                                            1002 test $0, %ax
    91                                                                            1003 jne  .acquire
    92                                                                            1000 mov  $1, %ax
    93                                                                            1001 xchg %ax, mutex
    94                                                                            1002 test $0, %ax
    95 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    95                                                                                                     1002 test $0, %ax
    96                                                                                                     1003 jne  .acquire
    97                                                                                                     1000 mov  $1, %ax
    98                                                                                                     1001 xchg %ax, mutex
    99                                                                                                     1002 test $0, %ax
   100 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   100                                                                                                                              1002 test $0, %ax
   101                                                                                                                              1003 jne  .acquire
   102                                                                                                                              1000 mov  $1, %ax
   103                                                                                                                              1001 xchg %ax, mutex
   104                                                                                                                              1002 test $0, %ax
   105 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   105                                                                                                                                                       1002 test $0, %ax
   106                                                                                                                                                       1003 jne  .acquire
   107                                                                                                                                                       1000 mov  $1, %ax
   108                                                                                                                                                       1001 xchg %ax, mutex
   109                                                                                                                                                       1002 test $0, %ax
   110 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   110                                                                                                                                                                                1002 test $0, %ax
   111                                                                                                                                                                                1003 jne  .acquire
   112                                                                                                                                                                                1000 mov  $1, %ax
   113                                                                                                                                                                                1001 xchg %ax, mutex
   114                                                                                                                                                                                1002 test $0, %ax
   115 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   115                          1009 test $0, %bx
   116                          1010 jgt .top
   117                          1011 halt
   118 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   118                                                   1003 jne  .acquire
   119                                                   1004 mov  count, %ax
   120 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   120                                                                            1003 jne  .acquire
   121                                                                            1000 mov  $1, %ax
   122                                                                            1001 xchg %ax, mutex
   123                                                                            1002 test $0, %ax
   124                                                                            1003 jne  .acquire
   125 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   125                                                                                                     1003 jne  .acquire
   126                                                                                                     1000 mov  $1, %ax
   127                                                                                                     1001 xchg %ax, mutex
   128                                                                                                     1002 test $0, %ax
   129                                                                                                     1003 jne  .acquire
   130 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   130                                                                                                                              1003 jne  .acquire
   131                                                                                                                              1000 mov  $1, %ax
   132                                                                                                                              1001 xchg %ax, mutex
   133                                                                                                                              1002 test $0, %ax
   134                                                                                                                              1003 jne  .acquire
   135 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   135                                                                                                                                                       1003 jne  .acquire
   136                                                                                                                                                       1000 mov  $1, %ax
   137                                                                                                                                                       1001 xchg %ax, mutex
   138                                                                                                                                                       1002 test $0, %ax
   139                                                                                                                                                       1003 jne  .acquire
   140 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   140                                                                                                                                                                                1003 jne  .acquire
   141                                                                                                                                                                                1000 mov  $1, %ax
   142                                                                                                                                                                                1001 xchg %ax, mutex
   143                                                                                                                                                                                1002 test $0, %ax
   144                                                                                                                                                                                1003 jne  .acquire
   145 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   145                                                   1005 add  $1, %ax
   146                                                   1006 mov  %ax, count
   147                                                   1007 mov  $0, mutex
   148                                                   1008 sub  $1, %bx
   149                                                   1009 test $0, %bx
   150 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   150                                                                            1000 mov  $1, %ax
   151                                                                            1001 xchg %ax, mutex
   152                                                                            1002 test $0, %ax
   153                                                                            1003 jne  .acquire
   154                                                                            1004 mov  count, %ax
   155 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   155                                                                                                     1000 mov  $1, %ax
   156                                                                                                     1001 xchg %ax, mutex
   157                                                                                                     1002 test $0, %ax
   158                                                                                                     1003 jne  .acquire
   159                                                                                                     1000 mov  $1, %ax
   160 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   160                                                                                                                              1000 mov  $1, %ax
   161                                                                                                                              1001 xchg %ax, mutex
   162                                                                                                                              1002 test $0, %ax
   163                                                                                                                              1003 jne  .acquire
   164                                                                                                                              1000 mov  $1, %ax
   165 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   165                                                                                                                                                       1000 mov  $1, %ax
   166                                                                                                                                                       1001 xchg %ax, mutex
   167                                                                                                                                                       1002 test $0, %ax
   168                                                                                                                                                       1003 jne  .acquire
   169                                                                                                                                                       1000 mov  $1, %ax
   170 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   170                                                                                                                                                                                1000 mov  $1, %ax
   171                                                                                                                                                                                1001 xchg %ax, mutex
   172                                                                                                                                                                                1002 test $0, %ax
   173                                                                                                                                                                                1003 jne  .acquire
   174                                                                                                                                                                                1000 mov  $1, %ax
   175 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   175                                                   1010 jgt .top
   176                                                   1011 halt
   177 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   177                                                                            1005 add  $1, %ax
   178                                                                            1006 mov  %ax, count
   179                                                                            1007 mov  $0, mutex
   180 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   180                                                                                                     1001 xchg %ax, mutex
   181                                                                                                     1002 test $0, %ax
   182                                                                                                     1003 jne  .acquire
   183                                                                                                     1004 mov  count, %ax
   184                                                                                                     1005 add  $1, %ax
   185 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   185                                                                                                                              1001 xchg %ax, mutex
   186                                                                                                                              1002 test $0, %ax
   187                                                                                                                              1003 jne  .acquire
   188                                                                                                                              1000 mov  $1, %ax
   189                                                                                                                              1001 xchg %ax, mutex
   190 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   190                                                                                                                                                       1001 xchg %ax, mutex
   191                                                                                                                                                       1002 test $0, %ax
   192                                                                                                                                                       1003 jne  .acquire
   193                                                                                                                                                       1000 mov  $1, %ax
   194                                                                                                                                                       1001 xchg %ax, mutex
   195 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   195                                                                                                                                                                                1001 xchg %ax, mutex
   196                                                                                                                                                                                1002 test $0, %ax
   197                                                                                                                                                                                1003 jne  .acquire
   198                                                                                                                                                                                1000 mov  $1, %ax
   199                                                                                                                                                                                1001 xchg %ax, mutex
   200 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   200                                                                            1008 sub  $1, %bx
   201                                                                            1009 test $0, %bx
   202                                                                            1010 jgt .top
   203                                                                            1011 halt
   204 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   204                                                                                                     1006 mov  %ax, count
   205 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   205                                                                                                                              1002 test $0, %ax
   206                                                                                                                              1003 jne  .acquire
   207                                                                                                                              1000 mov  $1, %ax
   208                                                                                                                              1001 xchg %ax, mutex
   209                                                                                                                              1002 test $0, %ax
   210 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   210                                                                                                                                                       1002 test $0, %ax
   211                                                                                                                                                       1003 jne  .acquire
   212                                                                                                                                                       1000 mov  $1, %ax
   213                                                                                                                                                       1001 xchg %ax, mutex
   214                                                                                                                                                       1002 test $0, %ax
   215 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   215                                                                                                                                                                                1002 test $0, %ax
   216                                                                                                                                                                                1003 jne  .acquire
   217                                                                                                                                                                                1000 mov  $1, %ax
   218                                                                                                                                                                                1001 xchg %ax, mutex
   219                                                                                                                                                                                1002 test $0, %ax
   220 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   220                                                                                                     1007 mov  $0, mutex
   221                                                                                                     1008 sub  $1, %bx
   222                                                                                                     1009 test $0, %bx
   223                                                                                                     1010 jgt .top
   224                                                                                                     1011 halt
   225 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   225 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   225                                                                                                                                                       1003 jne  .acquire
   226                                                                                                                                                       1000 mov  $1, %ax
   227                                                                                                                                                       1001 xchg %ax, mutex
   228                                                                                                                                                       1002 test $0, %ax
   229                                                                                                                                                       1003 jne  .acquire
   230 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   230                                                                                                                                                                                1003 jne  .acquire
   231                                                                                                                                                                                1000 mov  $1, %ax
   232                                                                                                                                                                                1001 xchg %ax, mutex
   233                                                                                                                                                                                1002 test $0, %ax
   234                                                                                                                                                                                1003 jne  .acquire
   235 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   235                                                                                                                              1003 jne  .acquire
   236                                                                                                                              1000 mov  $1, %ax
   237                                                                                                                              1001 xchg %ax, mutex
   238                                                                                                                              1002 test $0, %ax
   239                                                                                                                              1003 jne  .acquire
   240 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   240                                                                                                                                                       1004 mov  count, %ax
   241                                                                                                                                                       1005 add  $1, %ax
   242                                                                                                                                                       1006 mov  %ax, count
   243                                                                                                                                                       1007 mov  $0, mutex
   244                                                                                                                                                       1008 sub  $1, %bx
   245 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   245                                                                                                                                                                                1000 mov  $1, %ax
   246                                                                                                                                                                                1001 xchg %ax, mutex
   247                                                                                                                                                                                1002 test $0, %ax
   248                                                                                                                                                                                1003 jne  .acquire
   249                                                                                                                                                                                1004 mov  count, %ax
   250 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   250                                                                                                                              1000 mov  $1, %ax
   251                                                                                                                              1001 xchg %ax, mutex
   252                                                                                                                              1002 test $0, %ax
   253                                                                                                                              1003 jne  .acquire
   254                                                                                                                              1000 mov  $1, %ax
   255 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   255                                                                                                                                                       1009 test $0, %bx
   256                                                                                                                                                       1010 jgt .top
   257                                                                                                                                                       1011 halt
   258 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   258                                                                                                                                                                                1005 add  $1, %ax
   259                                                                                                                                                                                1006 mov  %ax, count
   260 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   260                                                                                                                              1001 xchg %ax, mutex
   261                                                                                                                              1002 test $0, %ax
   262                                                                                                                              1003 jne  .acquire
   263                                                                                                                              1000 mov  $1, %ax
   264                                                                                                                              1001 xchg %ax, mutex
   265 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   265                                                                                                                                                                                1007 mov  $0, mutex
   266                                                                                                                                                                                1008 sub  $1, %bx
   267                                                                                                                                                                                1009 test $0, %bx
   268                                                                                                                                                                                1010 jgt .top
   269                                                                                                                                                                                1011 halt
   270 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   270 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   270                                                                                                                              1002 test $0, %ax
   271                                                                                                                              1003 jne  .acquire
   272                                                                                                                              1000 mov  $1, %ax
   273                                                                                                                              1001 xchg %ax, mutex
   274                                                                                                                              1002 test $0, %ax
   275 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   275                                                                                                                              1003 jne  .acquire
   276                                                                                                                              1004 mov  count, %ax
   277                                                                                                                              1005 add  $1, %ax
   278                                                                                                                              1006 mov  %ax, count
   279                                                                                                                              1007 mov  $0, mutex
   280 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   280                                                                                                                              1008 sub  $1, %bx
   281                                                                                                                              1009 test $0, %bx
   282                                                                                                                              1010 jgt .top
   283                                                                                                                              1011 halt

STATS:: Instructions    284
STATS:: Emulation Rate  97.80 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 6
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 1005 add  $1, %ax
     6 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     6                          1000 mov  $1, %ax
     7                          1001 xchg %ax, mutex
     8                          1002 test $0, %ax
     9                          1003 jne  .acquire
    10                          1000 mov  $1, %ax
    11                          1001 xchg %ax, mutex
    12 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    12                                                   1000 mov  $1, %ax
    13                                                   1001 xchg %ax, mutex
    14                                                   1002 test $0, %ax
    15                                                   1003 jne  .acquire
    16                                                   1000 mov  $1, %ax
    17                                                   1001 xchg %ax, mutex
    18 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    18                                                                            1000 mov  $1, %ax
    19                                                                            1001 xchg %ax, mutex
    20                                                                            1002 test $0, %ax
    21                                                                            1003 jne  .acquire
    22                                                                            1000 mov  $1, %ax
    23                                                                            1001 xchg %ax, mutex
    24 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    24                                                                                                     1000 mov  $1, %ax
    25                                                                                                     1001 xchg %ax, mutex
    26                                                                                                     1002 test $0, %ax
    27                                                                                                     1003 jne  .acquire
    28                                                                                                     1000 mov  $1, %ax
    29                                                                                                     1001 xchg %ax, mutex
    30 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    30                                                                                                                              1000 mov  $1, %ax
    31                                                                                                                              1001 xchg %ax, mutex
    32                                                                                                                              1002 test $0, %ax
    33                                                                                                                              1003 jne  .acquire
    34                                                                                                                              1000 mov  $1, %ax
    35                                                                                                                              1001 xchg %ax, mutex
    36 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    36                                                                                                                                                       1000 mov  $1, %ax
    37                                                                                                                                                       1001 xchg %ax, mutex
    38                                                                                                                                                       1002 test $0, %ax
    39                                                                                                                                                       1003 jne  .acquire
    40                                                                                                                                                       1000 mov  $1, %ax
    41                                                                                                                                                       1001 xchg %ax, mutex
    42 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    42                                                                                                                                                                                1000 mov  $1, %ax
    43                                                                                                                                                                                1001 xchg %ax, mutex
    44                                                                                                                                                                                1002 test $0, %ax
    45                                                                                                                                                                                1003 jne  .acquire
    46                                                                                                                                                                                1000 mov  $1, %ax
    47                                                                                                                                                                                1001 xchg %ax, mutex
    48 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    48 1006 mov  %ax, count
    49 1007 mov  $0, mutex
    50 1008 sub  $1, %bx
    51 1009 test $0, %bx
    52 1010 jgt .top
    53 1011 halt
    54 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    54 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    54                                                   1002 test $0, %ax
    55                                                   1003 jne  .acquire
    56                                                   1000 mov  $1, %ax
    57                                                   1001 xchg %ax, mutex
    58                                                   1002 test $0, %ax
    59                                                   1003 jne  .acquire
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                            1002 test $0, %ax
    61                                                                            1003 jne  .acquire
    62                                                                            1000 mov  $1, %ax
    63                                                                            1001 xchg %ax, mutex
    64                                                                            1002 test $0, %ax
    65                                                                            1003 jne  .acquire
    66 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    66                                                                                                     1002 test $0, %ax
    67                                                                                                     1003 jne  .acquire
    68                                                                                                     1000 mov  $1, %ax
    69                                                                                                     1001 xchg %ax, mutex
    70                                                                                                     1002 test $0, %ax
    71                                                                                                     1003 jne  .acquire
    72 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    72                                                                                                                              1002 test $0, %ax
    73                                                                                                                              1003 jne  .acquire
    74                                                                                                                              1000 mov  $1, %ax
    75                                                                                                                              1001 xchg %ax, mutex
    76                                                                                                                              1002 test $0, %ax
    77                                                                                                                              1003 jne  .acquire
    78 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    78                                                                                                                                                       1002 test $0, %ax
    79                                                                                                                                                       1003 jne  .acquire
    80                                                                                                                                                       1000 mov  $1, %ax
    81                                                                                                                                                       1001 xchg %ax, mutex
    82                                                                                                                                                       1002 test $0, %ax
    83                                                                                                                                                       1003 jne  .acquire
    84 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    84                                                                                                                                                                                1002 test $0, %ax
    85                                                                                                                                                                                1003 jne  .acquire
    86                                                                                                                                                                                1000 mov  $1, %ax
    87                                                                                                                                                                                1001 xchg %ax, mutex
    88                                                                                                                                                                                1002 test $0, %ax
    89                                                                                                                                                                                1003 jne  .acquire
    90 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    90                          1002 test $0, %ax
    91                          1003 jne  .acquire
    92                          1000 mov  $1, %ax
    93                          1001 xchg %ax, mutex
    94                          1002 test $0, %ax
    95                          1003 jne  .acquire
    96 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    96                                                   1004 mov  count, %ax
    97                                                   1005 add  $1, %ax
    98                                                   1006 mov  %ax, count
    99                                                   1007 mov  $0, mutex
   100                                                   1008 sub  $1, %bx
   101                                                   1009 test $0, %bx
   102 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   102                                                                            1000 mov  $1, %ax
   103                                                                            1001 xchg %ax, mutex
   104                                                                            1002 test $0, %ax
   105                                                                            1003 jne  .acquire
   106                                                                            1004 mov  count, %ax
   107                                                                            1005 add  $1, %ax
   108 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   108                                                                                                     1000 mov  $1, %ax
   109                                                                                                     1001 xchg %ax, mutex
   110                                                                                                     1002 test $0, %ax
   111                                                                                                     1003 jne  .acquire
   112                                                                                                     1000 mov  $1, %ax
   113                                                                                                     1001 xchg %ax, mutex
   114 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   114                                                                                                                              1000 mov  $1, %ax
   115                                                                                                                              1001 xchg %ax, mutex
   116                                                                                                                              1002 test $0, %ax
   117                                                                                                                              1003 jne  .acquire
   118                                                                                                                              1000 mov  $1, %ax
   119                                                                                                                              1001 xchg %ax, mutex
   120 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   120                                                                                                                                                       1000 mov  $1, %ax
   121                                                                                                                                                       1001 xchg %ax, mutex
   122                                                                                                                                                       1002 test $0, %ax
   123                                                                                                                                                       1003 jne  .acquire
   124                                                                                                                                                       1000 mov  $1, %ax
   125                                                                                                                                                       1001 xchg %ax, mutex
   126 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   126                                                                                                                                                                                1000 mov  $1, %ax
   127                                                                                                                                                                                1001 xchg %ax, mutex
   128                                                                                                                                                                                1002 test $0, %ax
   129                                                                                                                                                                                1003 jne  .acquire
   130                                                                                                                                                                                1000 mov  $1, %ax
   131                                                                                                                                                                                1001 xchg %ax, mutex
   132 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   132                          1000 mov  $1, %ax
   133                          1001 xchg %ax, mutex
   134                          1002 test $0, %ax
   135                          1003 jne  .acquire
   136                          1000 mov  $1, %ax
   137                          1001 xchg %ax, mutex
   138 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   138                                                   1010 jgt .top
   139                                                   1011 halt
   140 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   140                                                                            1006 mov  %ax, count
   141                                                                            1007 mov  $0, mutex
   142                                                                            1008 sub  $1, %bx
   143                                                                            1009 test $0, %bx
   144 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   144                                                                                                     1002 test $0, %ax
   145                                                                                                     1003 jne  .acquire
   146                                                                                                     1000 mov  $1, %ax
   147                                                                                                     1001 xchg %ax, mutex
   148                                                                                                     1002 test $0, %ax
   149                                                                                                     1003 jne  .acquire
   150 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   150                                                                                                                              1002 test $0, %ax
   151                                                                                                                              1003 jne  .acquire
   152                                                                                                                              1000 mov  $1, %ax
   153                                                                                                                              1001 xchg %ax, mutex
   154                                                                                                                              1002 test $0, %ax
   155                                                                                                                              1003 jne  .acquire
   156 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   156                                                                                                                                                       1002 test $0, %ax
   157                                                                                                                                                       1003 jne  .acquire
   158                                                                                                                                                       1000 mov  $1, %ax
   159                                                                                                                                                       1001 xchg %ax, mutex
   160                                                                                                                                                       1002 test $0, %ax
   161                                                                                                                                                       1003 jne  .acquire
   162 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   162                                                                                                                                                                                1002 test $0, %ax
   163                                                                                                                                                                                1003 jne  .acquire
   164                                                                                                                                                                                1000 mov  $1, %ax
   165                                                                                                                                                                                1001 xchg %ax, mutex
   166                                                                                                                                                                                1002 test $0, %ax
   167                                                                                                                                                                                1003 jne  .acquire
   168 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   168                          1002 test $0, %ax
   169                          1003 jne  .acquire
   170                          1000 mov  $1, %ax
   171                          1001 xchg %ax, mutex
   172                          1002 test $0, %ax
   173                          1003 jne  .acquire
   174 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   174                                                                            1010 jgt .top
   175                                                                            1011 halt
   176 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   176                                                                                                     1004 mov  count, %ax
   177                                                                                                     1005 add  $1, %ax
   178                                                                                                     1006 mov  %ax, count
   179                                                                                                     1007 mov  $0, mutex
   180 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   180                                                                                                                              1000 mov  $1, %ax
   181                                                                                                                              1001 xchg %ax, mutex
   182                                                                                                                              1002 test $0, %ax
   183                                                                                                                              1003 jne  .acquire
   184                                                                                                                              1004 mov  count, %ax
   185                                                                                                                              1005 add  $1, %ax
   186 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   186                                                                                                                                                       1000 mov  $1, %ax
   187                                                                                                                                                       1001 xchg %ax, mutex
   188                                                                                                                                                       1002 test $0, %ax
   189                                                                                                                                                       1003 jne  .acquire
   190                                                                                                                                                       1000 mov  $1, %ax
   191                                                                                                                                                       1001 xchg %ax, mutex
   192 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   192                                                                                                                                                                                1000 mov  $1, %ax
   193                                                                                                                                                                                1001 xchg %ax, mutex
   194                                                                                                                                                                                1002 test $0, %ax
   195                                                                                                                                                                                1003 jne  .acquire
   196                                                                                                                                                                                1000 mov  $1, %ax
   197                                                                                                                                                                                1001 xchg %ax, mutex
   198 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   198                          1000 mov  $1, %ax
   199                          1001 xchg %ax, mutex
   200                          1002 test $0, %ax
   201                          1003 jne  .acquire
   202                          1000 mov  $1, %ax
   203                          1001 xchg %ax, mutex
   204 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   204                                                                                                     1008 sub  $1, %bx
   205                                                                                                     1009 test $0, %bx
   206                                                                                                     1010 jgt .top
   207                                                                                                     1011 halt
   208 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   208                                                                                                                              1006 mov  %ax, count
   209                                                                                                                              1007 mov  $0, mutex
   210 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   210                                                                                                                                                       1002 test $0, %ax
   211                                                                                                                                                       1003 jne  .acquire
   212                                                                                                                                                       1000 mov  $1, %ax
   213                                                                                                                                                       1001 xchg %ax, mutex
   214                                                                                                                                                       1002 test $0, %ax
   215                                                                                                                                                       1003 jne  .acquire
   216 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   216                                                                                                                                                                                1002 test $0, %ax
   217                                                                                                                                                                                1003 jne  .acquire
   218                                                                                                                                                                                1000 mov  $1, %ax
   219                                                                                                                                                                                1001 xchg %ax, mutex
   220                                                                                                                                                                                1002 test $0, %ax
   221                                                                                                                                                                                1003 jne  .acquire
   222 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   222                          1002 test $0, %ax
   223                          1003 jne  .acquire
   224                          1000 mov  $1, %ax
   225                          1001 xchg %ax, mutex
   226                          1002 test $0, %ax
   227                          1003 jne  .acquire
   228 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   228                                                                                                                              1008 sub  $1, %bx
   229                                                                                                                              1009 test $0, %bx
   230                                                                                                                              1010 jgt .top
   231                                                                                                                              1011 halt
   232 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   232                                                                                                                                                       1004 mov  count, %ax
   233                                                                                                                                                       1005 add  $1, %ax
   234 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   234                                                                                                                                                                                1000 mov  $1, %ax
   235                                                                                                                                                                                1001 xchg %ax, mutex
   236                                                                                                                                                                                1002 test $0, %ax
   237                                                                                                                                                                                1003 jne  .acquire
   238                                                                                                                                                                                1000 mov  $1, %ax
   239                                                                                                                                                                                1001 xchg %ax, mutex
   240 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   240                          1000 mov  $1, %ax
   241                          1001 xchg %ax, mutex
   242                          1002 test $0, %ax
   243                          1003 jne  .acquire
   244                          1000 mov  $1, %ax
   245                          1001 xchg %ax, mutex
   246 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   246                                                                                                                                                       1006 mov  %ax, count
   247                                                                                                                                                       1007 mov  $0, mutex
   248                                                                                                                                                       1008 sub  $1, %bx
   249                                                                                                                                                       1009 test $0, %bx
   250                                                                                                                                                       1010 jgt .top
   251                                                                                                                                                       1011 halt
   252 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   252 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   252                          1002 test $0, %ax
   253                          1003 jne  .acquire
   254                          1000 mov  $1, %ax
   255                          1001 xchg %ax, mutex
   256                          1002 test $0, %ax
   257                          1003 jne  .acquire
   258 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   258                                                                                                                                                                                1002 test $0, %ax
   259                                                                                                                                                                                1003 jne  .acquire
   260                                                                                                                                                                                1000 mov  $1, %ax
   261                                                                                                                                                                                1001 xchg %ax, mutex
   262                                                                                                                                                                                1002 test $0, %ax
   263                                                                                                                                                                                1003 jne  .acquire
   264 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   264                          1004 mov  count, %ax
   265                          1005 add  $1, %ax
   266                          1006 mov  %ax, count
   267                          1007 mov  $0, mutex
   268                          1008 sub  $1, %bx
   269                          1009 test $0, %bx
   270 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   270                                                                                                                                                                                1000 mov  $1, %ax
   271                                                                                                                                                                                1001 xchg %ax, mutex
   272                                                                                                                                                                                1002 test $0, %ax
   273                                                                                                                                                                                1003 jne  .acquire
   274                                                                                                                                                                                1004 mov  count, %ax
   275                                                                                                                                                                                1005 add  $1, %ax
   276 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   276                          1010 jgt .top
   277                          1011 halt
   278 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   278                                                                                                                                                                                1006 mov  %ax, count
   279                                                                                                                                                                                1007 mov  $0, mutex
   280                                                                                                                                                                                1008 sub  $1, %bx
   281                                                                                                                                                                                1009 test $0, %bx
   282 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   282                                                                                                                                                                                1010 jgt .top
   283                                                                                                                                                                                1011 halt

STATS:: Instructions    284
STATS:: Emulation Rate  94.23 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 7
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 1005 add  $1, %ax
     6 1006 mov  %ax, count
     7 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     7                          1000 mov  $1, %ax
     8                          1001 xchg %ax, mutex
     9                          1002 test $0, %ax
    10                          1003 jne  .acquire
    11                          1000 mov  $1, %ax
    12                          1001 xchg %ax, mutex
    13                          1002 test $0, %ax
    14 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    14                                                   1000 mov  $1, %ax
    15                                                   1001 xchg %ax, mutex
    16                                                   1002 test $0, %ax
    17                                                   1003 jne  .acquire
    18                                                   1000 mov  $1, %ax
    19                                                   1001 xchg %ax, mutex
    20                                                   1002 test $0, %ax
    21 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    21                                                                            1000 mov  $1, %ax
    22                                                                            1001 xchg %ax, mutex
    23                                                                            1002 test $0, %ax
    24                                                                            1003 jne  .acquire
    25                                                                            1000 mov  $1, %ax
    26                                                                            1001 xchg %ax, mutex
    27                                                                            1002 test $0, %ax
    28 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    28                                                                                                     1000 mov  $1, %ax
    29                                                                                                     1001 xchg %ax, mutex
    30                                                                                                     1002 test $0, %ax
    31                                                                                                     1003 jne  .acquire
    32                                                                                                     1000 mov  $1, %ax
    33                                                                                                     1001 xchg %ax, mutex
    34                                                                                                     1002 test $0, %ax
    35 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    35                                                                                                                              1000 mov  $1, %ax
    36                                                                                                                              1001 xchg %ax, mutex
    37                                                                                                                              1002 test $0, %ax
    38                                                                                                                              1003 jne  .acquire
    39                                                                                                                              1000 mov  $1, %ax
    40                                                                                                                              1001 xchg %ax, mutex
    41                                                                                                                              1002 test $0, %ax
    42 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    42                                                                                                                                                       1000 mov  $1, %ax
    43                                                                                                                                                       1001 xchg %ax, mutex
    44                                                                                                                                                       1002 test $0, %ax
    45                                                                                                                                                       1003 jne  .acquire
    46                                                                                                                                                       1000 mov  $1, %ax
    47                                                                                                                                                       1001 xchg %ax, mutex
    48                                                                                                                                                       1002 test $0, %ax
    49 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    49                                                                                                                                                                                1000 mov  $1, %ax
    50                                                                                                                                                                                1001 xchg %ax, mutex
    51                                                                                                                                                                                1002 test $0, %ax
    52                                                                                                                                                                                1003 jne  .acquire
    53                                                                                                                                                                                1000 mov  $1, %ax
    54                                                                                                                                                                                1001 xchg %ax, mutex
    55                                                                                                                                                                                1002 test $0, %ax
    56 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    56 1007 mov  $0, mutex
    57 1008 sub  $1, %bx
    58 1009 test $0, %bx
    59 1010 jgt .top
    60 1011 halt
    61 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    61                          1003 jne  .acquire
    62                          1000 mov  $1, %ax
    63 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    63                                                   1003 jne  .acquire
    64                                                   1000 mov  $1, %ax
    65                                                   1001 xchg %ax, mutex
    66                                                   1002 test $0, %ax
    67                                                   1003 jne  .acquire
    68                                                   1004 mov  count, %ax
    69                                                   1005 add  $1, %ax
    70 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    70                                                                            1003 jne  .acquire
    71                                                                            1000 mov  $1, %ax
    72                                                                            1001 xchg %ax, mutex
    73                                                                            1002 test $0, %ax
    74                                                                            1003 jne  .acquire
    75                                                                            1000 mov  $1, %ax
    76                                                                            1001 xchg %ax, mutex
    77 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    77                                                                                                     1003 jne  .acquire
    78                                                                                                     1000 mov  $1, %ax
    79                                                                                                     1001 xchg %ax, mutex
    80                                                                                                     1002 test $0, %ax
    81                                                                                                     1003 jne  .acquire
    82                                                                                                     1000 mov  $1, %ax
    83                                                                                                     1001 xchg %ax, mutex
    84 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    84                                                                                                                              1003 jne  .acquire
    85                                                                                                                              1000 mov  $1, %ax
    86                                                                                                                              1001 xchg %ax, mutex
    87                                                                                                                              1002 test $0, %ax
    88                                                                                                                              1003 jne  .acquire
    89                                                                                                                              1000 mov  $1, %ax
    90                                                                                                                              1001 xchg %ax, mutex
    91 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    91                                                                                                                                                       1003 jne  .acquire
    92                                                                                                                                                       1000 mov  $1, %ax
    93                                                                                                                                                       1001 xchg %ax, mutex
    94                                                                                                                                                       1002 test $0, %ax
    95                                                                                                                                                       1003 jne  .acquire
    96                                                                                                                                                       1000 mov  $1, %ax
    97                                                                                                                                                       1001 xchg %ax, mutex
    98 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    98                                                                                                                                                                                1003 jne  .acquire
    99                                                                                                                                                                                1000 mov  $1, %ax
   100                                                                                                                                                                                1001 xchg %ax, mutex
   101                                                                                                                                                                                1002 test $0, %ax
   102                                                                                                                                                                                1003 jne  .acquire
   103                                                                                                                                                                                1000 mov  $1, %ax
   104                                                                                                                                                                                1001 xchg %ax, mutex
   105 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   105                          1001 xchg %ax, mutex
   106                          1002 test $0, %ax
   107                          1003 jne  .acquire
   108                          1000 mov  $1, %ax
   109                          1001 xchg %ax, mutex
   110                          1002 test $0, %ax
   111                          1003 jne  .acquire
   112 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   112                                                   1006 mov  %ax, count
   113                                                   1007 mov  $0, mutex
   114                                                   1008 sub  $1, %bx
   115                                                   1009 test $0, %bx
   116                                                   1010 jgt .top
   117                                                   1011 halt
   118 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   118                                                                            1002 test $0, %ax
   119 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   119                                                                                                     1002 test $0, %ax
   120                                                                                                     1003 jne  .acquire
   121                                                                                                     1000 mov  $1, %ax
   122                                                                                                     1001 xchg %ax, mutex
   123                                                                                                     1002 test $0, %ax
   124                                                                                                     1003 jne  .acquire
   125                                                                                                     1004 mov  count, %ax
   126 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   126                                                                                                                              1002 test $0, %ax
   127                                                                                                                              1003 jne  .acquire
   128                                                                                                                              1000 mov  $1, %ax
   129                                                                                                                              1001 xchg %ax, mutex
   130                                                                                                                              1002 test $0, %ax
   131                                                                                                                              1003 jne  .acquire
   132                                                                                                                              1000 mov  $1, %ax
   133 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   133                                                                                                                                                       1002 test $0, %ax
   134                                                                                                                                                       1003 jne  .acquire
   135                                                                                                                                                       1000 mov  $1, %ax
   136                                                                                                                                                       1001 xchg %ax, mutex
   137                                                                                                                                                       1002 test $0, %ax
   138                                                                                                                                                       1003 jne  .acquire
   139                                                                                                                                                       1000 mov  $1, %ax
   140 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   140                                                                                                                                                                                1002 test $0, %ax
   141                                                                                                                                                                                1003 jne  .acquire
   142                                                                                                                                                                                1000 mov  $1, %ax
   143                                                                                                                                                                                1001 xchg %ax, mutex
   144                                                                                                                                                                                1002 test $0, %ax
   145                                                                                                                                                                                1003 jne  .acquire
   146                                                                                                                                                                                1000 mov  $1, %ax
   147 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   147                          1000 mov  $1, %ax
   148                          1001 xchg %ax, mutex
   149                          1002 test $0, %ax
   150                          1003 jne  .acquire
   151                          1000 mov  $1, %ax
   152                          1001 xchg %ax, mutex
   153                          1002 test $0, %ax
   154 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   154                                                                            1003 jne  .acquire
   155                                                                            1000 mov  $1, %ax
   156                                                                            1001 xchg %ax, mutex
   157                                                                            1002 test $0, %ax
   158                                                                            1003 jne  .acquire
   159                                                                            1000 mov  $1, %ax
   160                                                                            1001 xchg %ax, mutex
   161 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   161                                                                                                     1005 add  $1, %ax
   162                                                                                                     1006 mov  %ax, count
   163                                                                                                     1007 mov  $0, mutex
   164                                                                                                     1008 sub  $1, %bx
   165                                                                                                     1009 test $0, %bx
   166                                                                                                     1010 jgt .top
   167                                                                                                     1011 halt
   168 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   168 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   168                                                                                                                                                       1001 xchg %ax, mutex
   169                                                                                                                                                       1002 test $0, %ax
   170                                                                                                                                                       1003 jne  .acquire
   171                                                                                                                                                       1004 mov  count, %ax
   172                                                                                                                                                       1005 add  $1, %ax
   173                                                                                                                                                       1006 mov  %ax, count
   174                                                                                                                                                       1007 mov  $0, mutex
   175 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   175                                                                                                                                                                                1001 xchg %ax, mutex
   176                                                                                                                                                                                1002 test $0, %ax
   177                                                                                                                                                                                1003 jne  .acquire
   178                                                                                                                                                                                1004 mov  count, %ax
   179                                                                                                                                                                                1005 add  $1, %ax
   180                                                                                                                                                                                1006 mov  %ax, count
   181                                                                                                                                                                                1007 mov  $0, mutex
   182 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   182                          1003 jne  .acquire
   183                          1000 mov  $1, %ax
   184                          1001 xchg %ax, mutex
   185                          1002 test $0, %ax
   186                          1003 jne  .acquire
   187                          1004 mov  count, %ax
   188                          1005 add  $1, %ax
   189 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   189                                                                            1002 test $0, %ax
   190                                                                            1003 jne  .acquire
   191                                                                            1000 mov  $1, %ax
   192                                                                            1001 xchg %ax, mutex
   193                                                                            1002 test $0, %ax
   194                                                                            1003 jne  .acquire
   195                                                                            1000 mov  $1, %ax
   196 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   196                                                                                                                              1001 xchg %ax, mutex
   197                                                                                                                              1002 test $0, %ax
   198                                                                                                                              1003 jne  .acquire
   199                                                                                                                              1000 mov  $1, %ax
   200                                                                                                                              1001 xchg %ax, mutex
   201                                                                                                                              1002 test $0, %ax
   202                                                                                                                              1003 jne  .acquire
   203 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   203                                                                                                                                                       1008 sub  $1, %bx
   204                                                                                                                                                       1009 test $0, %bx
   205                                                                                                                                                       1010 jgt .top
   206                                                                                                                                                       1011 halt
   207 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   207                                                                                                                                                                                1008 sub  $1, %bx
   208                                                                                                                                                                                1009 test $0, %bx
   209                                                                                                                                                                                1010 jgt .top
   210 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   210                          1006 mov  %ax, count
   211                          1007 mov  $0, mutex
   212                          1008 sub  $1, %bx
   213                          1009 test $0, %bx
   214                          1010 jgt .top
   215                          1011 halt
   216 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   216                                                                            1001 xchg %ax, mutex
   217 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   217                                                                                                                              1000 mov  $1, %ax
   218                                                                                                                              1001 xchg %ax, mutex
   219                                                                                                                              1002 test $0, %ax
   220                                                                                                                              1003 jne  .acquire
   221                                                                                                                              1000 mov  $1, %ax
   222                                                                                                                              1001 xchg %ax, mutex
   223                                                                                                                              1002 test $0, %ax
   224 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   224                                                                                                                                                                                1011 halt
   225 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   225                                                                            1002 test $0, %ax
   226                                                                            1003 jne  .acquire
   227                                                                            1004 mov  count, %ax
   228                                                                            1005 add  $1, %ax
   229                                                                            1006 mov  %ax, count
   230                                                                            1007 mov  $0, mutex
   231 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   231                                                                                                                              1003 jne  .acquire
   232                                                                                                                              1000 mov  $1, %ax
   233                                                                                                                              1001 xchg %ax, mutex
   234                                                                                                                              1002 test $0, %ax
   235                                                                                                                              1003 jne  .acquire
   236                                                                                                                              1004 mov  count, %ax
   237                                                                                                                              1005 add  $1, %ax
   238 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   238                                                                            1008 sub  $1, %bx
   239                                                                            1009 test $0, %bx
   240                                                                            1010 jgt .top
   241                                                                            1011 halt
   242 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   242                                                                                                                              1006 mov  %ax, count
   243                                                                                                                              1007 mov  $0, mutex
   244                                                                                                                              1008 sub  $1, %bx
   245 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   245                                                                                                                              1009 test $0, %bx
   246                                                                                                                              1010 jgt .top
   247                                                                                                                              1011 halt

STATS:: Instructions    248
STATS:: Emulation Rate  105.58 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 8
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 1005 add  $1, %ax
     6 1006 mov  %ax, count
     7 1007 mov  $0, mutex
     8 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     8                          1000 mov  $1, %ax
     9                          1001 xchg %ax, mutex
    10                          1002 test $0, %ax
    11                          1003 jne  .acquire
    12                          1004 mov  count, %ax
    13                          1005 add  $1, %ax
    14                          1006 mov  %ax, count
    15                          1007 mov  $0, mutex
    16 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    16                                                   1000 mov  $1, %ax
    17                                                   1001 xchg %ax, mutex
    18                                                   1002 test $0, %ax
    19                                                   1003 jne  .acquire
    20                                                   1004 mov  count, %ax
    21                                                   1005 add  $1, %ax
    22                                                   1006 mov  %ax, count
    23                                                   1007 mov  $0, mutex
    24 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    24                                                                            1000 mov  $1, %ax
    25                                                                            1001 xchg %ax, mutex
    26                                                                            1002 test $0, %ax
    27                                                                            1003 jne  .acquire
    28                                                                            1004 mov  count, %ax
    29                                                                            1005 add  $1, %ax
    30                                                                            1006 mov  %ax, count
    31                                                                            1007 mov  $0, mutex
    32 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    32                                                                                                     1000 mov  $1, %ax
    33                                                                                                     1001 xchg %ax, mutex
    34                                                                                                     1002 test $0, %ax
    35                                                                                                     1003 jne  .acquire
    36                                                                                                     1004 mov  count, %ax
    37                                                                                                     1005 add  $1, %ax
    38                                                                                                     1006 mov  %ax, count
    39                                                                                                     1007 mov  $0, mutex
    40 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    40                                                                                                                              1000 mov  $1, %ax
    41                                                                                                                              1001 xchg %ax, mutex
    42                                                                                                                              1002 test $0, %ax
    43                                                                                                                              1003 jne  .acquire
    44                                                                                                                              1004 mov  count, %ax
    45                                                                                                                              1005 add  $1, %ax
    46                                                                                                                              1006 mov  %ax, count
    47                                                                                                                              1007 mov  $0, mutex
    48 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    48                                                                                                                                                       1000 mov  $1, %ax
    49                                                                                                                                                       1001 xchg %ax, mutex
    50                                                                                                                                                       1002 test $0, %ax
    51                                                                                                                                                       1003 jne  .acquire
    52                                                                                                                                                       1004 mov  count, %ax
    53                                                                                                                                                       1005 add  $1, %ax
    54                                                                                                                                                       1006 mov  %ax, count
    55                                                                                                                                                       1007 mov  $0, mutex
    56 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    56                                                                                                                                                                                1000 mov  $1, %ax
    57                                                                                                                                                                                1001 xchg %ax, mutex
    58                                                                                                                                                                                1002 test $0, %ax
    59                                                                                                                                                                                1003 jne  .acquire
    60                                                                                                                                                                                1004 mov  count, %ax
    61                                                                                                                                                                                1005 add  $1, %ax
    62                                                                                                                                                                                1006 mov  %ax, count
    63                                                                                                                                                                                1007 mov  $0, mutex
    64 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    64 1008 sub  $1, %bx
    65 1009 test $0, %bx
    66 1010 jgt .top
    67 1011 halt
    68 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    68                          1008 sub  $1, %bx
    69                          1009 test $0, %bx
    70                          1010 jgt .top
    71                          1011 halt
    72 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    72 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    72                                                                            1008 sub  $1, %bx
    73                                                                            1009 test $0, %bx
    74                                                                            1010 jgt .top
    75                                                                            1011 halt
    76 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    76                                                                                                     1008 sub  $1, %bx
    77                                                                                                     1009 test $0, %bx
    78                                                                                                     1010 jgt .top
    79                                                                                                     1011 halt
    80 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    80 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    80                                                                                                                                                       1008 sub  $1, %bx
    81                                                                                                                                                       1009 test $0, %bx
    82                                                                                                                                                       1010 jgt .top
    83                                                                                                                                                       1011 halt
    84 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    84                                                                                                                                                                                1008 sub  $1, %bx
    85                                                                                                                                                                                1009 test $0, %bx
    86                                                                                                                                                                                1010 jgt .top
    87                                                                                                                                                                                1011 halt
    88 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    88 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    88                                                                                                                              1008 sub  $1, %bx
    89                                                                                                                              1009 test $0, %bx
    90                                                                                                                              1010 jgt .top
    91                                                                                                                              1011 halt
    92 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    92                                                   1008 sub  $1, %bx
    93                                                   1009 test $0, %bx
    94                                                   1010 jgt .top
    95                                                   1011 halt

STATS:: Instructions    96
STATS:: Emulation Rate  98.06 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 9
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 1005 add  $1, %ax
     6 1006 mov  %ax, count
     7 1007 mov  $0, mutex
     8 1008 sub  $1, %bx
     9 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
     9                          1000 mov  $1, %ax
    10                          1001 xchg %ax, mutex
    11                          1002 test $0, %ax
    12                          1003 jne  .acquire
    13                          1004 mov  count, %ax
    14                          1005 add  $1, %ax
    15                          1006 mov  %ax, count
    16                          1007 mov  $0, mutex
    17                          1008 sub  $1, %bx
    18 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    18                                                   1000 mov  $1, %ax
    19                                                   1001 xchg %ax, mutex
    20                                                   1002 test $0, %ax
    21                                                   1003 jne  .acquire
    22                                                   1004 mov  count, %ax
    23                                                   1005 add  $1, %ax
    24                                                   1006 mov  %ax, count
    25                                                   1007 mov  $0, mutex
    26                                                   1008 sub  $1, %bx
    27 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    27                                                                            1000 mov  $1, %ax
    28                                                                            1001 xchg %ax, mutex
    29                                                                            1002 test $0, %ax
    30                                                                            1003 jne  .acquire
    31                                                                            1004 mov  count, %ax
    32                                                                            1005 add  $1, %ax
    33                                                                            1006 mov  %ax, count
    34                                                                            1007 mov  $0, mutex
    35                                                                            1008 sub  $1, %bx
    36 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    36                                                                                                     1000 mov  $1, %ax
    37                                                                                                     1001 xchg %ax, mutex
    38                                                                                                     1002 test $0, %ax
    39                                                                                                     1003 jne  .acquire
    40                                                                                                     1004 mov  count, %ax
    41                                                                                                     1005 add  $1, %ax
    42                                                                                                     1006 mov  %ax, count
    43                                                                                                     1007 mov  $0, mutex
    44                                                                                                     1008 sub  $1, %bx
    45 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    45                                                                                                                              1000 mov  $1, %ax
    46                                                                                                                              1001 xchg %ax, mutex
    47                                                                                                                              1002 test $0, %ax
    48                                                                                                                              1003 jne  .acquire
    49                                                                                                                              1004 mov  count, %ax
    50                                                                                                                              1005 add  $1, %ax
    51                                                                                                                              1006 mov  %ax, count
    52                                                                                                                              1007 mov  $0, mutex
    53                                                                                                                              1008 sub  $1, %bx
    54 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    54                                                                                                                                                       1000 mov  $1, %ax
    55                                                                                                                                                       1001 xchg %ax, mutex
    56                                                                                                                                                       1002 test $0, %ax
    57                                                                                                                                                       1003 jne  .acquire
    58                                                                                                                                                       1004 mov  count, %ax
    59                                                                                                                                                       1005 add  $1, %ax
    60                                                                                                                                                       1006 mov  %ax, count
    61                                                                                                                                                       1007 mov  $0, mutex
    62                                                                                                                                                       1008 sub  $1, %bx
    63 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    63                                                                                                                                                                                1000 mov  $1, %ax
    64                                                                                                                                                                                1001 xchg %ax, mutex
    65                                                                                                                                                                                1002 test $0, %ax
    66                                                                                                                                                                                1003 jne  .acquire
    67                                                                                                                                                                                1004 mov  count, %ax
    68                                                                                                                                                                                1005 add  $1, %ax
    69                                                                                                                                                                                1006 mov  %ax, count
    70                                                                                                                                                                                1007 mov  $0, mutex
    71                                                                                                                                                                                1008 sub  $1, %bx
    72 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    72 1009 test $0, %bx
    73 1010 jgt .top
    74 1011 halt
    75 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    75                          1009 test $0, %bx
    76                          1010 jgt .top
    77                          1011 halt
    78 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    78                                                   1009 test $0, %bx
    79                                                   1010 jgt .top
    80                                                   1011 halt
    81 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    81 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    81                                                                                                     1009 test $0, %bx
    82                                                                                                     1010 jgt .top
    83                                                                                                     1011 halt
    84 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    84                                                                                                                              1009 test $0, %bx
    85                                                                                                                              1010 jgt .top
    86                                                                                                                              1011 halt
    87 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    87                                                                                                                                                       1009 test $0, %bx
    88                                                                                                                                                       1010 jgt .top
    89                                                                                                                                                       1011 halt
    90 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    90 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    90                                                                            1009 test $0, %bx
    91                                                                            1010 jgt .top
    92                                                                            1011 halt
    93 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    93                                                                                                                                                                                1009 test $0, %bx
    94                                                                                                                                                                                1010 jgt .top
    95                                                                                                                                                                                1011 halt

STATS:: Instructions    96
STATS:: Emulation Rate  100.10 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 10
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 1005 add  $1, %ax
     6 1006 mov  %ax, count
     7 1007 mov  $0, mutex
     8 1008 sub  $1, %bx
     9 1009 test $0, %bx
    10 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    10                          1000 mov  $1, %ax
    11                          1001 xchg %ax, mutex
    12                          1002 test $0, %ax
    13                          1003 jne  .acquire
    14                          1004 mov  count, %ax
    15                          1005 add  $1, %ax
    16                          1006 mov  %ax, count
    17                          1007 mov  $0, mutex
    18                          1008 sub  $1, %bx
    19                          1009 test $0, %bx
    20 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    20                                                   1000 mov  $1, %ax
    21                                                   1001 xchg %ax, mutex
    22                                                   1002 test $0, %ax
    23                                                   1003 jne  .acquire
    24                                                   1004 mov  count, %ax
    25                                                   1005 add  $1, %ax
    26                                                   1006 mov  %ax, count
    27                                                   1007 mov  $0, mutex
    28                                                   1008 sub  $1, %bx
    29                                                   1009 test $0, %bx
    30 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    30                                                                            1000 mov  $1, %ax
    31                                                                            1001 xchg %ax, mutex
    32                                                                            1002 test $0, %ax
    33                                                                            1003 jne  .acquire
    34                                                                            1004 mov  count, %ax
    35                                                                            1005 add  $1, %ax
    36                                                                            1006 mov  %ax, count
    37                                                                            1007 mov  $0, mutex
    38                                                                            1008 sub  $1, %bx
    39                                                                            1009 test $0, %bx
    40 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    40                                                                                                     1000 mov  $1, %ax
    41                                                                                                     1001 xchg %ax, mutex
    42                                                                                                     1002 test $0, %ax
    43                                                                                                     1003 jne  .acquire
    44                                                                                                     1004 mov  count, %ax
    45                                                                                                     1005 add  $1, %ax
    46                                                                                                     1006 mov  %ax, count
    47                                                                                                     1007 mov  $0, mutex
    48                                                                                                     1008 sub  $1, %bx
    49                                                                                                     1009 test $0, %bx
    50 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    50                                                                                                                              1000 mov  $1, %ax
    51                                                                                                                              1001 xchg %ax, mutex
    52                                                                                                                              1002 test $0, %ax
    53                                                                                                                              1003 jne  .acquire
    54                                                                                                                              1004 mov  count, %ax
    55                                                                                                                              1005 add  $1, %ax
    56                                                                                                                              1006 mov  %ax, count
    57                                                                                                                              1007 mov  $0, mutex
    58                                                                                                                              1008 sub  $1, %bx
    59                                                                                                                              1009 test $0, %bx
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                                                                                                       1000 mov  $1, %ax
    61                                                                                                                                                       1001 xchg %ax, mutex
    62                                                                                                                                                       1002 test $0, %ax
    63                                                                                                                                                       1003 jne  .acquire
    64                                                                                                                                                       1004 mov  count, %ax
    65                                                                                                                                                       1005 add  $1, %ax
    66                                                                                                                                                       1006 mov  %ax, count
    67                                                                                                                                                       1007 mov  $0, mutex
    68                                                                                                                                                       1008 sub  $1, %bx
    69                                                                                                                                                       1009 test $0, %bx
    70 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    70                                                                                                                                                                                1000 mov  $1, %ax
    71                                                                                                                                                                                1001 xchg %ax, mutex
    72                                                                                                                                                                                1002 test $0, %ax
    73                                                                                                                                                                                1003 jne  .acquire
    74                                                                                                                                                                                1004 mov  count, %ax
    75                                                                                                                                                                                1005 add  $1, %ax
    76                                                                                                                                                                                1006 mov  %ax, count
    77                                                                                                                                                                                1007 mov  $0, mutex
    78                                                                                                                                                                                1008 sub  $1, %bx
    79                                                                                                                                                                                1009 test $0, %bx
    80 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    80 1010 jgt .top
    81 1011 halt
    82 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    82                          1010 jgt .top
    83                          1011 halt
    84 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    84                                                   1010 jgt .top
    85                                                   1011 halt
    86 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    86                                                                            1010 jgt .top
    87                                                                            1011 halt
    88 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    88                                                                                                     1010 jgt .top
    89                                                                                                     1011 halt
    90 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    90 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    90                                                                                                                                                       1010 jgt .top
    91                                                                                                                                                       1011 halt
    92 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    92                                                                                                                                                                                1010 jgt .top
    93                                                                                                                                                                                1011 halt
    94 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    94                                                                                                                              1010 jgt .top
    95                                                                                                                              1011 halt

STATS:: Instructions    96
STATS:: Emulation Rate  102.35 kinst/sec
ARG seed 0
ARG numthreads 8
ARG program test-and-set.s
ARG interrupt frequency 20
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 1005 add  $1, %ax
     6 1006 mov  %ax, count
     7 1007 mov  $0, mutex
     8 1008 sub  $1, %bx
     9 1009 test $0, %bx
    10 1010 jgt .top
    11 1011 halt
    12 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    12                          1000 mov  $1, %ax
    13                          1001 xchg %ax, mutex
    14                          1002 test $0, %ax
    15                          1003 jne  .acquire
    16                          1004 mov  count, %ax
    17                          1005 add  $1, %ax
    18                          1006 mov  %ax, count
    19                          1007 mov  $0, mutex
    20 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    20                                                   1000 mov  $1, %ax
    21                                                   1001 xchg %ax, mutex
    22                                                   1002 test $0, %ax
    23                                                   1003 jne  .acquire
    24                                                   1004 mov  count, %ax
    25                                                   1005 add  $1, %ax
    26                                                   1006 mov  %ax, count
    27                                                   1007 mov  $0, mutex
    28                                                   1008 sub  $1, %bx
    29                                                   1009 test $0, %bx
    30                                                   1010 jgt .top
    31                                                   1011 halt
    32 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    32                                                                            1000 mov  $1, %ax
    33                                                                            1001 xchg %ax, mutex
    34                                                                            1002 test $0, %ax
    35                                                                            1003 jne  .acquire
    36                                                                            1004 mov  count, %ax
    37                                                                            1005 add  $1, %ax
    38                                                                            1006 mov  %ax, count
    39                                                                            1007 mov  $0, mutex
    40 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    40                                                                                                     1000 mov  $1, %ax
    41                                                                                                     1001 xchg %ax, mutex
    42                                                                                                     1002 test $0, %ax
    43                                                                                                     1003 jne  .acquire
    44                                                                                                     1004 mov  count, %ax
    45                                                                                                     1005 add  $1, %ax
    46                                                                                                     1006 mov  %ax, count
    47                                                                                                     1007 mov  $0, mutex
    48                                                                                                     1008 sub  $1, %bx
    49                                                                                                     1009 test $0, %bx
    50                                                                                                     1010 jgt .top
    51                                                                                                     1011 halt
    52 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    52                                                                                                                              1000 mov  $1, %ax
    53                                                                                                                              1001 xchg %ax, mutex
    54                                                                                                                              1002 test $0, %ax
    55                                                                                                                              1003 jne  .acquire
    56                                                                                                                              1004 mov  count, %ax
    57                                                                                                                              1005 add  $1, %ax
    58                                                                                                                              1006 mov  %ax, count
    59                                                                                                                              1007 mov  $0, mutex
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                                                                                                       1000 mov  $1, %ax
    61                                                                                                                                                       1001 xchg %ax, mutex
    62                                                                                                                                                       1002 test $0, %ax
    63                                                                                                                                                       1003 jne  .acquire
    64                                                                                                                                                       1004 mov  count, %ax
    65                                                                                                                                                       1005 add  $1, %ax
    66                                                                                                                                                       1006 mov  %ax, count
    67                                                                                                                                                       1007 mov  $0, mutex
    68                                                                                                                                                       1008 sub  $1, %bx
    69                                                                                                                                                       1009 test $0, %bx
    70                                                                                                                                                       1010 jgt .top
    71                                                                                                                                                       1011 halt
    72 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    72                                                                                                                                                                                1000 mov  $1, %ax
    73                                                                                                                                                                                1001 xchg %ax, mutex
    74                                                                                                                                                                                1002 test $0, %ax
    75                                                                                                                                                                                1003 jne  .acquire
    76                                                                                                                                                                                1004 mov  count, %ax
    77                                                                                                                                                                                1005 add  $1, %ax
    78                                                                                                                                                                                1006 mov  %ax, count
    79                                                                                                                                                                                1007 mov  $0, mutex
    80 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    80                          1008 sub  $1, %bx
    81                          1009 test $0, %bx
    82                          1010 jgt .top
    83                          1011 halt
    84 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    84                                                                            1008 sub  $1, %bx
    85                                                                            1009 test $0, %bx
    86                                                                            1010 jgt .top
    87                                                                            1011 halt
    88 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    88                                                                                                                              1008 sub  $1, %bx
    89                                                                                                                              1009 test $0, %bx
    90                                                                                                                              1010 jgt .top
    91                                                                                                                              1011 halt
    92 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    92                                                                                                                                                                                1008 sub  $1, %bx
    93                                                                                                                                                                                1009 test $0, %bx
    94                                                                                                                                                                                1010 jgt .top
    95                                                                                                                                                                                1011 halt

STATS:: Instructions    96
STATS:: Emulation Rate  106.31 kinst/sec
