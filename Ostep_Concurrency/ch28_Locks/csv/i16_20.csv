ARG seed 0
ARG numthreads 16
ARG program test-and-set.s
ARG interrupt frequency 20
ARG interrupt randomness False
ARG procsched 
ARG argv 
ARG load address 1000
ARG memsize 128
ARG memtrace 
ARG regtrace 
ARG cctrace False
ARG printstats True
ARG verbose False


icount        Thread 0                Thread 1                Thread 2                Thread 3                Thread 4                Thread 5                Thread 6                Thread 7                Thread 8                Thread 9                Thread 10                Thread 11                Thread 12                Thread 13                Thread 14                Thread 15         

     0      0 1000 mov  $1, %ax
     1 1001 xchg %ax, mutex
     2 1002 test $0, %ax
     3 1003 jne  .acquire
     4 1004 mov  count, %ax
     5 1005 add  $1, %ax
     6 1006 mov  %ax, count
     7 1007 mov  $0, mutex
     8 1008 sub  $1, %bx
     9 1009 test $0, %bx
    10 1010 jgt .top
    11 1011 halt
    12 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    12                          1000 mov  $1, %ax
    13                          1001 xchg %ax, mutex
    14                          1002 test $0, %ax
    15                          1003 jne  .acquire
    16                          1004 mov  count, %ax
    17                          1005 add  $1, %ax
    18                          1006 mov  %ax, count
    19                          1007 mov  $0, mutex
    20 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    20                                                   1000 mov  $1, %ax
    21                                                   1001 xchg %ax, mutex
    22                                                   1002 test $0, %ax
    23                                                   1003 jne  .acquire
    24                                                   1004 mov  count, %ax
    25                                                   1005 add  $1, %ax
    26                                                   1006 mov  %ax, count
    27                                                   1007 mov  $0, mutex
    28                                                   1008 sub  $1, %bx
    29                                                   1009 test $0, %bx
    30                                                   1010 jgt .top
    31                                                   1011 halt
    32 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    32                                                                            1000 mov  $1, %ax
    33                                                                            1001 xchg %ax, mutex
    34                                                                            1002 test $0, %ax
    35                                                                            1003 jne  .acquire
    36                                                                            1004 mov  count, %ax
    37                                                                            1005 add  $1, %ax
    38                                                                            1006 mov  %ax, count
    39                                                                            1007 mov  $0, mutex
    40 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    40                                                                                                     1000 mov  $1, %ax
    41                                                                                                     1001 xchg %ax, mutex
    42                                                                                                     1002 test $0, %ax
    43                                                                                                     1003 jne  .acquire
    44                                                                                                     1004 mov  count, %ax
    45                                                                                                     1005 add  $1, %ax
    46                                                                                                     1006 mov  %ax, count
    47                                                                                                     1007 mov  $0, mutex
    48                                                                                                     1008 sub  $1, %bx
    49                                                                                                     1009 test $0, %bx
    50                                                                                                     1010 jgt .top
    51                                                                                                     1011 halt
    52 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    52                                                                                                                              1000 mov  $1, %ax
    53                                                                                                                              1001 xchg %ax, mutex
    54                                                                                                                              1002 test $0, %ax
    55                                                                                                                              1003 jne  .acquire
    56                                                                                                                              1004 mov  count, %ax
    57                                                                                                                              1005 add  $1, %ax
    58                                                                                                                              1006 mov  %ax, count
    59                                                                                                                              1007 mov  $0, mutex
    60 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    60                                                                                                                                                       1000 mov  $1, %ax
    61                                                                                                                                                       1001 xchg %ax, mutex
    62                                                                                                                                                       1002 test $0, %ax
    63                                                                                                                                                       1003 jne  .acquire
    64                                                                                                                                                       1004 mov  count, %ax
    65                                                                                                                                                       1005 add  $1, %ax
    66                                                                                                                                                       1006 mov  %ax, count
    67                                                                                                                                                       1007 mov  $0, mutex
    68                                                                                                                                                       1008 sub  $1, %bx
    69                                                                                                                                                       1009 test $0, %bx
    70                                                                                                                                                       1010 jgt .top
    71                                                                                                                                                       1011 halt
    72 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    72                                                                                                                                                                                1000 mov  $1, %ax
    73                                                                                                                                                                                1001 xchg %ax, mutex
    74                                                                                                                                                                                1002 test $0, %ax
    75                                                                                                                                                                                1003 jne  .acquire
    76                                                                                                                                                                                1004 mov  count, %ax
    77                                                                                                                                                                                1005 add  $1, %ax
    78                                                                                                                                                                                1006 mov  %ax, count
    79                                                                                                                                                                                1007 mov  $0, mutex
    80 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
    80                                                                                                                                                                                                         1000 mov  $1, %ax
    81                                                                                                                                                                                                         1001 xchg %ax, mutex
    82                                                                                                                                                                                                         1002 test $0, %ax
    83                                                                                                                                                                                                         1003 jne  .acquire
    84                                                                                                                                                                                                         1004 mov  count, %ax
    85                                                                                                                                                                                                         1005 add  $1, %ax
    86                                                                                                                                                                                                         1006 mov  %ax, count
    87                                                                                                                                                                                                         1007 mov  $0, mutex
    88                                                                                                                                                                                                         1008 sub  $1, %bx
    89                                                                                                                                                                                                         1009 test $0, %bx
    90                                                                                                                                                                                                         1010 jgt .top
    91                                                                                                                                                                                                         1011 halt
    92 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
    92                                                                                                                                                                                                                                  1000 mov  $1, %ax
    93                                                                                                                                                                                                                                  1001 xchg %ax, mutex
    94                                                                                                                                                                                                                                  1002 test $0, %ax
    95                                                                                                                                                                                                                                  1003 jne  .acquire
    96                                                                                                                                                                                                                                  1004 mov  count, %ax
    97                                                                                                                                                                                                                                  1005 add  $1, %ax
    98                                                                                                                                                                                                                                  1006 mov  %ax, count
    99                                                                                                                                                                                                                                  1007 mov  $0, mutex
   100 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   100                                                                                                                                                                                                                                                           1000 mov  $1, %ax
   101                                                                                                                                                                                                                                                           1001 xchg %ax, mutex
   102                                                                                                                                                                                                                                                           1002 test $0, %ax
   103                                                                                                                                                                                                                                                           1003 jne  .acquire
   104                                                                                                                                                                                                                                                           1004 mov  count, %ax
   105                                                                                                                                                                                                                                                           1005 add  $1, %ax
   106                                                                                                                                                                                                                                                           1006 mov  %ax, count
   107                                                                                                                                                                                                                                                           1007 mov  $0, mutex
   108                                                                                                                                                                                                                                                           1008 sub  $1, %bx
   109                                                                                                                                                                                                                                                           1009 test $0, %bx
   110                                                                                                                                                                                                                                                           1010 jgt .top
   111                                                                                                                                                                                                                                                           1011 halt
   112 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   112                                                                                                                                                                                                                                                                                    1000 mov  $1, %ax
   113                                                                                                                                                                                                                                                                                    1001 xchg %ax, mutex
   114                                                                                                                                                                                                                                                                                    1002 test $0, %ax
   115                                                                                                                                                                                                                                                                                    1003 jne  .acquire
   116                                                                                                                                                                                                                                                                                    1004 mov  count, %ax
   117                                                                                                                                                                                                                                                                                    1005 add  $1, %ax
   118                                                                                                                                                                                                                                                                                    1006 mov  %ax, count
   119                                                                                                                                                                                                                                                                                    1007 mov  $0, mutex
   120 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   120                                                                                                                                                                                                                                                                                                             1000 mov  $1, %ax
   121                                                                                                                                                                                                                                                                                                             1001 xchg %ax, mutex
   122                                                                                                                                                                                                                                                                                                             1002 test $0, %ax
   123                                                                                                                                                                                                                                                                                                             1003 jne  .acquire
   124                                                                                                                                                                                                                                                                                                             1004 mov  count, %ax
   125                                                                                                                                                                                                                                                                                                             1005 add  $1, %ax
   126                                                                                                                                                                                                                                                                                                             1006 mov  %ax, count
   127                                                                                                                                                                                                                                                                                                             1007 mov  $0, mutex
   128                                                                                                                                                                                                                                                                                                             1008 sub  $1, %bx
   129                                                                                                                                                                                                                                                                                                             1009 test $0, %bx
   130                                                                                                                                                                                                                                                                                                             1010 jgt .top
   131                                                                                                                                                                                                                                                                                                             1011 halt
   132 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   132                                                                                                                                                                                                                                                                                                                                      1000 mov  $1, %ax
   133                                                                                                                                                                                                                                                                                                                                      1001 xchg %ax, mutex
   134                                                                                                                                                                                                                                                                                                                                      1002 test $0, %ax
   135                                                                                                                                                                                                                                                                                                                                      1003 jne  .acquire
   136                                                                                                                                                                                                                                                                                                                                      1004 mov  count, %ax
   137                                                                                                                                                                                                                                                                                                                                      1005 add  $1, %ax
   138                                                                                                                                                                                                                                                                                                                                      1006 mov  %ax, count
   139                                                                                                                                                                                                                                                                                                                                      1007 mov  $0, mutex
   140 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   140                                                                                                                                                                                                                                                                                                                                                               1000 mov  $1, %ax
   141                                                                                                                                                                                                                                                                                                                                                               1001 xchg %ax, mutex
   142                                                                                                                                                                                                                                                                                                                                                               1002 test $0, %ax
   143                                                                                                                                                                                                                                                                                                                                                               1003 jne  .acquire
   144                                                                                                                                                                                                                                                                                                                                                               1004 mov  count, %ax
   145                                                                                                                                                                                                                                                                                                                                                               1005 add  $1, %ax
   146                                                                                                                                                                                                                                                                                                                                                               1006 mov  %ax, count
   147                                                                                                                                                                                                                                                                                                                                                               1007 mov  $0, mutex
   148                                                                                                                                                                                                                                                                                                                                                               1008 sub  $1, %bx
   149                                                                                                                                                                                                                                                                                                                                                               1009 test $0, %bx
   150                                                                                                                                                                                                                                                                                                                                                               1010 jgt .top
   151                                                                                                                                                                                                                                                                                                                                                               1011 halt
   152 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   152                                                                                                                                                                                                                                                                                                                                                                                        1000 mov  $1, %ax
   153                                                                                                                                                                                                                                                                                                                                                                                        1001 xchg %ax, mutex
   154                                                                                                                                                                                                                                                                                                                                                                                        1002 test $0, %ax
   155                                                                                                                                                                                                                                                                                                                                                                                        1003 jne  .acquire
   156                                                                                                                                                                                                                                                                                                                                                                                        1004 mov  count, %ax
   157                                                                                                                                                                                                                                                                                                                                                                                        1005 add  $1, %ax
   158                                                                                                                                                                                                                                                                                                                                                                                        1006 mov  %ax, count
   159                                                                                                                                                                                                                                                                                                                                                                                        1007 mov  $0, mutex
   160 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   160                          1008 sub  $1, %bx
   161                          1009 test $0, %bx
   162                          1010 jgt .top
   163                          1011 halt
   164 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   164                                                                            1008 sub  $1, %bx
   165                                                                            1009 test $0, %bx
   166                                                                            1010 jgt .top
   167                                                                            1011 halt
   168 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   168                                                                                                                              1008 sub  $1, %bx
   169                                                                                                                              1009 test $0, %bx
   170                                                                                                                              1010 jgt .top
   171                                                                                                                              1011 halt
   172 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   172                                                                                                                                                                                1008 sub  $1, %bx
   173                                                                                                                                                                                1009 test $0, %bx
   174                                                                                                                                                                                1010 jgt .top
   175                                                                                                                                                                                1011 halt
   176 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   176                                                                                                                                                                                                                                  1008 sub  $1, %bx
   177                                                                                                                                                                                                                                  1009 test $0, %bx
   178                                                                                                                                                                                                                                  1010 jgt .top
   179                                                                                                                                                                                                                                  1011 halt
   180 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   180 ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  ------ Interrupt ------  
   180                                                                                                                                                                                                                                                                                                                                      1008 sub  $1, %bx
   181                                                                                                                                                                                                                                                                                                                                      1009 test $0, %bx
   182                                                                                                                                                                                                                                                                                                                                      1010 jgt .top
   183                                                                                                                                                                                                                                                                                                                                      1011 halt
   184 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   184                                                                                                                                                                                                                                                                                                                                                                                        1008 sub  $1, %bx
   185                                                                                                                                                                                                                                                                                                                                                                                        1009 test $0, %bx
   186                                                                                                                                                                                                                                                                                                                                                                                        1010 jgt .top
   187                                                                                                                                                                                                                                                                                                                                                                                        1011 halt
   188 ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  ----- Halt;Switch -----  
   188                                                                                                                                                                                                                                                                                    1008 sub  $1, %bx
   189                                                                                                                                                                                                                                                                                    1009 test $0, %bx
   190                                                                                                                                                                                                                                                                                    1010 jgt .top
   191                                                                                                                                                                                                                                                                                    1011 halt

STATS:: Instructions    192
STATS:: Emulation Rate  102.95 kinst/sec
